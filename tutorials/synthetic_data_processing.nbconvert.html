

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Synthetic Data Tutorial &mdash; aurora 0.3.13 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=d0ab9f1a"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            aurora
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-docs/installing.html">Installing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/operate_aurora.html">Build an MTH5 and Operate the Aurora Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/operate_aurora.html#1.-Build-an-MTH5-file-from-Earthscope-archives">1. Build an MTH5 file from Earthscope archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/operate_aurora.html#2:-Process-Data">2: Process Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/operate_aurora.html#Here-is-one-way-to-select-a-single-run:">Here is one way to select a single run:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/operate_aurora.html#To-discard-runs-that-are-not-very-long">To discard runs that are not very long</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/operate_aurora.html#To-process-only-a-segment-of-data">To process only a segment of data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/operate_aurora.html#Exercise:">Exercise:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/operate_aurora.html#id1">Exercise:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/dataset_definition.html">Dataset Definition DataFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/dataset_definition.html#Excercise:">Excercise:</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="processing_configuration.html">Processing Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_configuration.html#Example-of-making-a-KernelDataset-from-an-mth5">Example of making a KernelDataset from an mth5</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_configuration.html#EMTF-Band-Setup-File">EMTF Band Setup File</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html">Accessing Magnetic Field Data from EarthScope Using MTH5</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html#0.-Getting-started">0. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html#1.-Exploring-the-data-at-EarthScope">1. Exploring the data at EarthScope</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html#2.-Case-Study:">2. Case Study:</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html#3.-Define-request-dataframe">3. Define request dataframe</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html#4.-Build-MTH5">4. Build MTH5</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html#5.-Build-MTH5-(with-data)">5. Build MTH5 (with data)</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html#6.-Calibrating-time-series">6. Calibrating time series</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html#7.-Comparison-of-time-series">7. Comparison of time series</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthscope_magnetic_data_tutorial.html#TODO:-9.-Access-USGS-data-directly">TODO: 9. Access USGS data directly</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_cas04_multiple_station.html">Process CAS04 with Remote Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_cas04_multiple_station.html#Make-MTH5-from-IRIS-Data-Managment-Center-v0.2.0">Make MTH5 from IRIS Data Managment Center v0.2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_cas04_multiple_station.html#To-compare-with-the-archived-file,-we-need-to-set-the-coordinate-system-to-geographic">To compare with the archived file, we need to set the coordinate system to geographic</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_cas04_multiple_station.html#Part-II:-Logic-to-save-FCs">Part II: Logic to save FCs</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_cas04_multiple_station.html#Now-that-the-FCs-are-saved-we-can-access-them:|">Now that the FCs are saved we can access them:|</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_cas04_multiple_station.html#Absolute-Minimal-Example">Absolute Minimal Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="synthetic_data_processing.html">Synthetic Data Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="synthetic_data_processing.html#Feature-Storage-Experimental-work-in-progress">Feature Storage <strong>Experimental work in progress</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">aurora</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">aurora</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Synthetic Data Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/synthetic_data_processing.nbconvert.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Synthetic-Data-Tutorial">
<h1>Synthetic Data Tutorial<a class="headerlink" href="#Synthetic-Data-Tutorial" title="Permalink to this heading">Â¶</a></h1>
<p>This notebook shows how to process MTH5 data from a synthetic dataset.</p>
<p>It also shows how to modify processing so that Fourier coefficients are saved in the mth5. These FCs can be used to perform TF estimation using different regression settings. The same FCs will be used for feature extraction in future (This section is a work in Progress).</p>
<section id="Contents:">
<h2>Contents:<a class="headerlink" href="#Contents:" title="Permalink to this heading">Â¶</a></h2>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#Process-Synthetic-Data-with-Aurora"><span class="std std-ref">Process Synthetic Data with Aurora</span></a></p></li>
<li><p><a class="reference internal" href="#Fourier-coefficient-storage-in-MTH5"><span class="std std-ref">Fourier coefficient storage in MTH5</span></a></p></li>
</ol>
</section>
<section id="Process-Synthetic-Data-with-Aurora">
<h2>Process Synthetic Data with Aurora<a class="headerlink" href="#Process-Synthetic-Data-with-Aurora" title="Permalink to this heading">Â¶</a></h2>
<p>Here is a minimal example of running aurora processing on an mth5 populated with synthetic time series.</p>
<p>Steps:</p>
<ol class="arabic simple">
<li><p>Create the synthetic mth5</p></li>
<li><p>Get a Run Summary from the mth5</p></li>
<li><p>Select the station to process and optionally the remote reference station</p></li>
<li><p>Create a processing config</p></li>
<li><p>Generate TFs</p></li>
<li><p>Archive the TFs (in emtf_xml or z-file)</p></li>
</ol>
<section id="Here-are-the-modules-we-will-need-to-import">
<h3>Here are the modules we will need to import<a class="headerlink" href="#Here-are-the-modules-we-will-need-to-import" title="Permalink to this heading">Â¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">aurora.config.config_creator</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConfigCreator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">aurora.pipelines.process_mth5</span><span class="w"> </span><span class="kn">import</span> <span class="n">process_mth5</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mth5.data.make_mth5_from_asc</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_test12rr_h5</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mth5.data.paths</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyntheticTestPaths</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mth5.processing</span><span class="w"> </span><span class="kn">import</span> <span class="n">RunSummary</span><span class="p">,</span> <span class="n">KernelDataset</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Define-target-folder-and-mth5-path">
<h3>Define target folder and mth5 path<a class="headerlink" href="#Define-target-folder-and-mth5-path" title="Permalink to this heading">Â¶</a></h3>
<p>By default, the synthetic mth5 file is used for testing in <code class="docutils literal notranslate"><span class="pre">aurora/tests/synthetic/</span></code> and probably already exists on your system if you have run the tests. In the code below, we check if the file exists already, and if not we make it.</p>
<p><strong>NOTE:</strong> If using a read-only HPC installation, you may not be able to write to the directory where aurora is installed. In that case, defining your target path as somewhere you have write permission. In that case, uncommment the READ ONLY INSTALLATION block below.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">synthetic_test_paths</span> <span class="o">=</span> <span class="n">SyntheticTestPaths</span><span class="p">()</span>
<span class="n">target_folder</span> <span class="o">=</span> <span class="n">synthetic_test_paths</span><span class="o">.</span><span class="n">mth5_path</span>

<span class="c1">## READ ONLY INSTALLATION</span>
<span class="c1"># home = pathlib.Path.home()</span>
<span class="c1"># target_folder = home.joinpath(&quot;aurora_test_folder&quot;)</span>
<span class="c1"># target_folder.mkdir(parents=True, exist_ok=True)</span>

<span class="n">mth5_path</span> <span class="o">=</span> <span class="n">target_folder</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;test12rr.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>If the mth5 doesnât already exist, or you want to re-make it, call <code class="docutils literal notranslate"><span class="pre">create_test12rr_h5()</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Uncomment this to start with a fresh mth5 file</span>

<span class="c1"># mth5_path.unlink()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">mth5_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="n">create_test12rr_h5</span><span class="p">(</span><span class="n">target_folder</span><span class="o">=</span><span class="n">target_folder</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Get-a-Run-Summary">
<h3>Get a Run Summary<a class="headerlink" href="#Get-a-Run-Summary" title="Permalink to this heading">Â¶</a></h3>
<p>Note that we didnât need to explicitly open the mth5 to do that, we can pass the path if we want. Run summary takes a list of mth5 paths as input argument.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mth5_run_summary</span> <span class="o">=</span> <span class="n">RunSummary</span><span class="p">()</span>
<span class="n">mth5_run_summary</span><span class="o">.</span><span class="n">from_mth5s</span><span class="p">([</span><span class="n">mth5_path</span><span class="p">,])</span>
<span class="n">run_summary</span> <span class="o">=</span> <span class="n">mth5_run_summary</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">run_summary</span><span class="o">.</span><span class="n">mini_summary</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:14.991058+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>survey</th>
      <th>station</th>
      <th>run</th>
      <th>start</th>
      <th>end</th>
      <th>duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>EMTF Synthetic</td>
      <td>test1</td>
      <td>001</td>
      <td>1980-01-01 00:00:00+00:00</td>
      <td>1980-01-01 11:06:39+00:00</td>
      <td>39999.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>EMTF Synthetic</td>
      <td>test2</td>
      <td>001</td>
      <td>1980-01-01 00:00:00+00:00</td>
      <td>1980-01-01 11:06:39+00:00</td>
      <td>39999.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Define-a-Kernel-Dataset">
<h3>Define a Kernel Dataset<a class="headerlink" href="#Define-a-Kernel-Dataset" title="Permalink to this heading">Â¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kernel_dataset</span> <span class="o">=</span> <span class="n">KernelDataset</span><span class="p">()</span>
<span class="n">kernel_dataset</span><span class="o">.</span><span class="n">from_run_summary</span><span class="p">(</span><span class="n">run_summary</span><span class="p">,</span> <span class="s2">&quot;test1&quot;</span><span class="p">,</span> <span class="s2">&quot;test2&quot;</span><span class="p">)</span>
<span class="n">kernel_dataset</span><span class="o">.</span><span class="n">mini_summary</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:15.029644+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column fc, adding and setting dtype to &lt;class &#39;pandas._libs.missing.NAType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:15.030827+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column remote, adding and setting dtype to &lt;class &#39;bool&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:15.031656+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column run_dataarray, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:15.033047+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column stft, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:15.033889+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column mth5_obj, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>survey</th>
      <th>station</th>
      <th>run</th>
      <th>start</th>
      <th>end</th>
      <th>duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>EMTF Synthetic</td>
      <td>test1</td>
      <td>001</td>
      <td>1980-01-01 00:00:00+00:00</td>
      <td>1980-01-01 11:06:39+00:00</td>
      <td>39999.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>EMTF Synthetic</td>
      <td>test2</td>
      <td>001</td>
      <td>1980-01-01 00:00:00+00:00</td>
      <td>1980-01-01 11:06:39+00:00</td>
      <td>39999.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Now-define-the-processing-Configuration">
<h3>Now define the processing Configuration<a class="headerlink" href="#Now-define-the-processing-Configuration" title="Permalink to this heading">Â¶</a></h3>
<p>The only things we need to provide are our band processing scheme, and the data sample rate to generate a default processing configuration.</p>
<p>The config will get its information about the specific stations to process via the kernel dataset.</p>
<p><strong>NOTE:</strong> When doing only single station processing you need to specify RME processing (rather than remote reference processing which expects extra time series from another station)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cc</span> <span class="o">=</span> <span class="n">ConfigCreator</span><span class="p">()</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">cc</span><span class="o">.</span><span class="n">create_from_kernel_dataset</span><span class="p">(</span><span class="n">kernel_dataset</span><span class="p">)</span>

<span class="c1"># you can export the config to a json by uncommenting the following line</span>
<span class="c1"># cfg_json = config.to_json()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:15.057860+0000 | INFO | aurora.config.config_creator | determine_band_specification_style | Bands not defined; setting to EMTF BANDS_DEFAULT_FILE</span>
</pre></div></div>
</div>
</section>
<section id="Take-a-look-at-the-processing-configuration">
<h3>Take a look at the processing configuration<a class="headerlink" href="#Take-a-look-at-the-processing-configuration" title="Permalink to this heading">Â¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">config</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
    &#34;processing&#34;: {
        &#34;band_setup_file&#34;: &#34;/home/runner/work/aurora/aurora/aurora/config/emtf_band_setup/bs_test.cfg&#34;,
        &#34;band_specification_style&#34;: &#34;EMTF&#34;,
        &#34;channel_nomenclature.ex&#34;: &#34;ex&#34;,
        &#34;channel_nomenclature.ey&#34;: &#34;ey&#34;,
        &#34;channel_nomenclature.hx&#34;: &#34;hx&#34;,
        &#34;channel_nomenclature.hy&#34;: &#34;hy&#34;,
        &#34;channel_nomenclature.hz&#34;: &#34;hz&#34;,
        &#34;decimations&#34;: [
            {
                &#34;decimation_level&#34;: {
                    &#34;bands&#34;: [
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 0,
                                &#34;frequency_max&#34;: 0.23828125,
                                &#34;frequency_min&#34;: 0.19140625,
                                &#34;index_max&#34;: 30,
                                &#34;index_min&#34;: 25
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 0,
                                &#34;frequency_max&#34;: 0.19140625,
                                &#34;frequency_min&#34;: 0.15234375,
                                &#34;index_max&#34;: 24,
                                &#34;index_min&#34;: 20
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 0,
                                &#34;frequency_max&#34;: 0.15234375,
                                &#34;frequency_min&#34;: 0.12109375,
                                &#34;index_max&#34;: 19,
                                &#34;index_min&#34;: 16
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 0,
                                &#34;frequency_max&#34;: 0.12109375,
                                &#34;frequency_min&#34;: 0.09765625,
                                &#34;index_max&#34;: 15,
                                &#34;index_min&#34;: 13
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 0,
                                &#34;frequency_max&#34;: 0.09765625,
                                &#34;frequency_min&#34;: 0.07421875,
                                &#34;index_max&#34;: 12,
                                &#34;index_min&#34;: 10
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 0,
                                &#34;frequency_max&#34;: 0.07421875,
                                &#34;frequency_min&#34;: 0.05859375,
                                &#34;index_max&#34;: 9,
                                &#34;index_min&#34;: 8
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 0,
                                &#34;frequency_max&#34;: 0.05859375,
                                &#34;frequency_min&#34;: 0.04296875,
                                &#34;index_max&#34;: 7,
                                &#34;index_min&#34;: 6
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 0,
                                &#34;frequency_max&#34;: 0.04296875,
                                &#34;frequency_min&#34;: 0.03515625,
                                &#34;index_max&#34;: 5,
                                &#34;index_min&#34;: 5
                            }
                        }
                    ],
                    &#34;channel_weight_specs&#34;: [],
                    &#34;decimation.anti_alias_filter&#34;: &#34;default&#34;,
                    &#34;decimation.factor&#34;: 1.0,
                    &#34;decimation.level&#34;: 0,
                    &#34;decimation.method&#34;: &#34;default&#34;,
                    &#34;decimation.sample_rate&#34;: 1.0,
                    &#34;estimator.engine&#34;: &#34;RME_RR&#34;,
                    &#34;estimator.estimate_per_channel&#34;: true,
                    &#34;input_channels&#34;: [
                        &#34;hx&#34;,
                        &#34;hy&#34;
                    ],
                    &#34;output_channels&#34;: [
                        &#34;ex&#34;,
                        &#34;ey&#34;,
                        &#34;hz&#34;
                    ],
                    &#34;reference_channels&#34;: [
                        &#34;hx&#34;,
                        &#34;hy&#34;
                    ],
                    &#34;regression.max_iterations&#34;: 10,
                    &#34;regression.max_redescending_iterations&#34;: 2,
                    &#34;regression.minimum_cycles&#34;: 10,
                    &#34;regression.r0&#34;: 1.5,
                    &#34;regression.tolerance&#34;: 0.005,
                    &#34;regression.u0&#34;: 2.8,
                    &#34;regression.verbosity&#34;: 0,
                    &#34;save_fcs&#34;: false,
                    &#34;stft.harmonic_indices&#34;: [
                        -1
                    ],
                    &#34;stft.method&#34;: &#34;fft&#34;,
                    &#34;stft.min_num_stft_windows&#34;: 2,
                    &#34;stft.per_window_detrend_type&#34;: &#34;linear&#34;,
                    &#34;stft.pre_fft_detrend_type&#34;: &#34;linear&#34;,
                    &#34;stft.prewhitening_type&#34;: &#34;first difference&#34;,
                    &#34;stft.recoloring&#34;: true,
                    &#34;stft.window.clock_zero_type&#34;: &#34;ignore&#34;,
                    &#34;stft.window.normalized&#34;: true,
                    &#34;stft.window.num_samples&#34;: 128,
                    &#34;stft.window.overlap&#34;: 32,
                    &#34;stft.window.type&#34;: &#34;boxcar&#34;
                }
            },
            {
                &#34;decimation_level&#34;: {
                    &#34;bands&#34;: [
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 1,
                                &#34;frequency_max&#34;: 0.0341796875,
                                &#34;frequency_min&#34;: 0.0263671875,
                                &#34;index_max&#34;: 17,
                                &#34;index_min&#34;: 14
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 1,
                                &#34;frequency_max&#34;: 0.0263671875,
                                &#34;frequency_min&#34;: 0.0205078125,
                                &#34;index_max&#34;: 13,
                                &#34;index_min&#34;: 11
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 1,
                                &#34;frequency_max&#34;: 0.0205078125,
                                &#34;frequency_min&#34;: 0.0166015625,
                                &#34;index_max&#34;: 10,
                                &#34;index_min&#34;: 9
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 1,
                                &#34;frequency_max&#34;: 0.0166015625,
                                &#34;frequency_min&#34;: 0.0126953125,
                                &#34;index_max&#34;: 8,
                                &#34;index_min&#34;: 7
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 1,
                                &#34;frequency_max&#34;: 0.0126953125,
                                &#34;frequency_min&#34;: 0.0107421875,
                                &#34;index_max&#34;: 6,
                                &#34;index_min&#34;: 6
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 1,
                                &#34;frequency_max&#34;: 0.0107421875,
                                &#34;frequency_min&#34;: 0.0087890625,
                                &#34;index_max&#34;: 5,
                                &#34;index_min&#34;: 5
                            }
                        }
                    ],
                    &#34;channel_weight_specs&#34;: [],
                    &#34;decimation.anti_alias_filter&#34;: &#34;default&#34;,
                    &#34;decimation.factor&#34;: 4.0,
                    &#34;decimation.level&#34;: 1,
                    &#34;decimation.method&#34;: &#34;default&#34;,
                    &#34;decimation.sample_rate&#34;: 0.25,
                    &#34;estimator.engine&#34;: &#34;RME_RR&#34;,
                    &#34;estimator.estimate_per_channel&#34;: true,
                    &#34;input_channels&#34;: [
                        &#34;hx&#34;,
                        &#34;hy&#34;
                    ],
                    &#34;output_channels&#34;: [
                        &#34;ex&#34;,
                        &#34;ey&#34;,
                        &#34;hz&#34;
                    ],
                    &#34;reference_channels&#34;: [
                        &#34;hx&#34;,
                        &#34;hy&#34;
                    ],
                    &#34;regression.max_iterations&#34;: 10,
                    &#34;regression.max_redescending_iterations&#34;: 2,
                    &#34;regression.minimum_cycles&#34;: 10,
                    &#34;regression.r0&#34;: 1.5,
                    &#34;regression.tolerance&#34;: 0.005,
                    &#34;regression.u0&#34;: 2.8,
                    &#34;regression.verbosity&#34;: 0,
                    &#34;save_fcs&#34;: false,
                    &#34;stft.harmonic_indices&#34;: [
                        -1
                    ],
                    &#34;stft.method&#34;: &#34;fft&#34;,
                    &#34;stft.min_num_stft_windows&#34;: 2,
                    &#34;stft.per_window_detrend_type&#34;: &#34;linear&#34;,
                    &#34;stft.pre_fft_detrend_type&#34;: &#34;linear&#34;,
                    &#34;stft.prewhitening_type&#34;: &#34;first difference&#34;,
                    &#34;stft.recoloring&#34;: true,
                    &#34;stft.window.clock_zero_type&#34;: &#34;ignore&#34;,
                    &#34;stft.window.normalized&#34;: true,
                    &#34;stft.window.num_samples&#34;: 128,
                    &#34;stft.window.overlap&#34;: 32,
                    &#34;stft.window.type&#34;: &#34;boxcar&#34;
                }
            },
            {
                &#34;decimation_level&#34;: {
                    &#34;bands&#34;: [
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 2,
                                &#34;frequency_max&#34;: 0.008544921875,
                                &#34;frequency_min&#34;: 0.006591796875,
                                &#34;index_max&#34;: 17,
                                &#34;index_min&#34;: 14
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 2,
                                &#34;frequency_max&#34;: 0.006591796875,
                                &#34;frequency_min&#34;: 0.005126953125,
                                &#34;index_max&#34;: 13,
                                &#34;index_min&#34;: 11
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 2,
                                &#34;frequency_max&#34;: 0.005126953125,
                                &#34;frequency_min&#34;: 0.004150390625,
                                &#34;index_max&#34;: 10,
                                &#34;index_min&#34;: 9
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 2,
                                &#34;frequency_max&#34;: 0.004150390625,
                                &#34;frequency_min&#34;: 0.003173828125,
                                &#34;index_max&#34;: 8,
                                &#34;index_min&#34;: 7
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 2,
                                &#34;frequency_max&#34;: 0.003173828125,
                                &#34;frequency_min&#34;: 0.002685546875,
                                &#34;index_max&#34;: 6,
                                &#34;index_min&#34;: 6
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 2,
                                &#34;frequency_max&#34;: 0.002685546875,
                                &#34;frequency_min&#34;: 0.002197265625,
                                &#34;index_max&#34;: 5,
                                &#34;index_min&#34;: 5
                            }
                        }
                    ],
                    &#34;channel_weight_specs&#34;: [],
                    &#34;decimation.anti_alias_filter&#34;: &#34;default&#34;,
                    &#34;decimation.factor&#34;: 4.0,
                    &#34;decimation.level&#34;: 2,
                    &#34;decimation.method&#34;: &#34;default&#34;,
                    &#34;decimation.sample_rate&#34;: 0.0625,
                    &#34;estimator.engine&#34;: &#34;RME_RR&#34;,
                    &#34;estimator.estimate_per_channel&#34;: true,
                    &#34;input_channels&#34;: [
                        &#34;hx&#34;,
                        &#34;hy&#34;
                    ],
                    &#34;output_channels&#34;: [
                        &#34;ex&#34;,
                        &#34;ey&#34;,
                        &#34;hz&#34;
                    ],
                    &#34;reference_channels&#34;: [
                        &#34;hx&#34;,
                        &#34;hy&#34;
                    ],
                    &#34;regression.max_iterations&#34;: 10,
                    &#34;regression.max_redescending_iterations&#34;: 2,
                    &#34;regression.minimum_cycles&#34;: 10,
                    &#34;regression.r0&#34;: 1.5,
                    &#34;regression.tolerance&#34;: 0.005,
                    &#34;regression.u0&#34;: 2.8,
                    &#34;regression.verbosity&#34;: 0,
                    &#34;save_fcs&#34;: false,
                    &#34;stft.harmonic_indices&#34;: [
                        -1
                    ],
                    &#34;stft.method&#34;: &#34;fft&#34;,
                    &#34;stft.min_num_stft_windows&#34;: 2,
                    &#34;stft.per_window_detrend_type&#34;: &#34;linear&#34;,
                    &#34;stft.pre_fft_detrend_type&#34;: &#34;linear&#34;,
                    &#34;stft.prewhitening_type&#34;: &#34;first difference&#34;,
                    &#34;stft.recoloring&#34;: true,
                    &#34;stft.window.clock_zero_type&#34;: &#34;ignore&#34;,
                    &#34;stft.window.normalized&#34;: true,
                    &#34;stft.window.num_samples&#34;: 128,
                    &#34;stft.window.overlap&#34;: 32,
                    &#34;stft.window.type&#34;: &#34;boxcar&#34;
                }
            },
            {
                &#34;decimation_level&#34;: {
                    &#34;bands&#34;: [
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 3,
                                &#34;frequency_max&#34;: 0.00274658203125,
                                &#34;frequency_min&#34;: 0.00213623046875,
                                &#34;index_max&#34;: 22,
                                &#34;index_min&#34;: 18
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 3,
                                &#34;frequency_max&#34;: 0.00213623046875,
                                &#34;frequency_min&#34;: 0.00164794921875,
                                &#34;index_max&#34;: 17,
                                &#34;index_min&#34;: 14
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 3,
                                &#34;frequency_max&#34;: 0.00164794921875,
                                &#34;frequency_min&#34;: 0.00115966796875,
                                &#34;index_max&#34;: 13,
                                &#34;index_min&#34;: 10
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 3,
                                &#34;frequency_max&#34;: 0.00115966796875,
                                &#34;frequency_min&#34;: 0.00079345703125,
                                &#34;index_max&#34;: 9,
                                &#34;index_min&#34;: 7
                            }
                        },
                        {
                            &#34;band&#34;: {
                                &#34;center_averaging_type&#34;: &#34;geometric&#34;,
                                &#34;closed&#34;: &#34;left&#34;,
                                &#34;decimation_level&#34;: 3,
                                &#34;frequency_max&#34;: 0.00079345703125,
                                &#34;frequency_min&#34;: 0.00054931640625,
                                &#34;index_max&#34;: 6,
                                &#34;index_min&#34;: 5
                            }
                        }
                    ],
                    &#34;channel_weight_specs&#34;: [],
                    &#34;decimation.anti_alias_filter&#34;: &#34;default&#34;,
                    &#34;decimation.factor&#34;: 4.0,
                    &#34;decimation.level&#34;: 3,
                    &#34;decimation.method&#34;: &#34;default&#34;,
                    &#34;decimation.sample_rate&#34;: 0.015625,
                    &#34;estimator.engine&#34;: &#34;RME_RR&#34;,
                    &#34;estimator.estimate_per_channel&#34;: true,
                    &#34;input_channels&#34;: [
                        &#34;hx&#34;,
                        &#34;hy&#34;
                    ],
                    &#34;output_channels&#34;: [
                        &#34;ex&#34;,
                        &#34;ey&#34;,
                        &#34;hz&#34;
                    ],
                    &#34;reference_channels&#34;: [
                        &#34;hx&#34;,
                        &#34;hy&#34;
                    ],
                    &#34;regression.max_iterations&#34;: 10,
                    &#34;regression.max_redescending_iterations&#34;: 2,
                    &#34;regression.minimum_cycles&#34;: 10,
                    &#34;regression.r0&#34;: 1.5,
                    &#34;regression.tolerance&#34;: 0.005,
                    &#34;regression.u0&#34;: 2.8,
                    &#34;regression.verbosity&#34;: 0,
                    &#34;save_fcs&#34;: false,
                    &#34;stft.harmonic_indices&#34;: [
                        -1
                    ],
                    &#34;stft.method&#34;: &#34;fft&#34;,
                    &#34;stft.min_num_stft_windows&#34;: 2,
                    &#34;stft.per_window_detrend_type&#34;: &#34;linear&#34;,
                    &#34;stft.pre_fft_detrend_type&#34;: &#34;linear&#34;,
                    &#34;stft.prewhitening_type&#34;: &#34;first difference&#34;,
                    &#34;stft.recoloring&#34;: true,
                    &#34;stft.window.clock_zero_type&#34;: &#34;ignore&#34;,
                    &#34;stft.window.normalized&#34;: true,
                    &#34;stft.window.num_samples&#34;: 128,
                    &#34;stft.window.overlap&#34;: 32,
                    &#34;stft.window.type&#34;: &#34;boxcar&#34;
                }
            }
        ],
        &#34;id&#34;: &#34;test1_rr_test2_sr1&#34;,
        &#34;stations.local.id&#34;: &#34;test1&#34;,
        &#34;stations.local.mth5_path&#34;: &#34;/usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5&#34;,
        &#34;stations.local.remote&#34;: false,
        &#34;stations.local.runs&#34;: [
            {
                &#34;run&#34;: {
                    &#34;id&#34;: &#34;001&#34;,
                    &#34;input_channels&#34;: [
                        {
                            &#34;channel&#34;: {
                                &#34;id&#34;: &#34;hx&#34;,
                                &#34;scale_factor&#34;: 1.0
                            }
                        },
                        {
                            &#34;channel&#34;: {
                                &#34;id&#34;: &#34;hy&#34;,
                                &#34;scale_factor&#34;: 1.0
                            }
                        }
                    ],
                    &#34;output_channels&#34;: [
                        {
                            &#34;channel&#34;: {
                                &#34;id&#34;: &#34;ex&#34;,
                                &#34;scale_factor&#34;: 1.0
                            }
                        },
                        {
                            &#34;channel&#34;: {
                                &#34;id&#34;: &#34;ey&#34;,
                                &#34;scale_factor&#34;: 1.0
                            }
                        },
                        {
                            &#34;channel&#34;: {
                                &#34;id&#34;: &#34;hz&#34;,
                                &#34;scale_factor&#34;: 1.0
                            }
                        }
                    ],
                    &#34;sample_rate&#34;: 1.0,
                    &#34;time_periods&#34;: [
                        {
                            &#34;time_period&#34;: {
                                &#34;end&#34;: &#34;1980-01-01T11:06:39+00:00&#34;,
                                &#34;start&#34;: &#34;1980-01-01T00:00:00+00:00&#34;
                            }
                        }
                    ]
                }
            }
        ],
        &#34;stations.remote&#34;: [
            {
                &#34;station&#34;: {
                    &#34;id&#34;: &#34;test2&#34;,
                    &#34;mth5_path&#34;: &#34;/usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5&#34;,
                    &#34;remote&#34;: true,
                    &#34;runs&#34;: [
                        {
                            &#34;run&#34;: {
                                &#34;id&#34;: &#34;001&#34;,
                                &#34;input_channels&#34;: [
                                    {
                                        &#34;channel&#34;: {
                                            &#34;id&#34;: &#34;hx&#34;,
                                            &#34;scale_factor&#34;: 1.0
                                        }
                                    },
                                    {
                                        &#34;channel&#34;: {
                                            &#34;id&#34;: &#34;hy&#34;,
                                            &#34;scale_factor&#34;: 1.0
                                        }
                                    }
                                ],
                                &#34;output_channels&#34;: [
                                    {
                                        &#34;channel&#34;: {
                                            &#34;id&#34;: &#34;ex&#34;,
                                            &#34;scale_factor&#34;: 1.0
                                        }
                                    },
                                    {
                                        &#34;channel&#34;: {
                                            &#34;id&#34;: &#34;ey&#34;,
                                            &#34;scale_factor&#34;: 1.0
                                        }
                                    },
                                    {
                                        &#34;channel&#34;: {
                                            &#34;id&#34;: &#34;hz&#34;,
                                            &#34;scale_factor&#34;: 1.0
                                        }
                                    }
                                ],
                                &#34;sample_rate&#34;: 1.0,
                                &#34;time_periods&#34;: [
                                    {
                                        &#34;time_period&#34;: {
                                            &#34;end&#34;: &#34;1980-01-01T11:06:39+00:00&#34;,
                                            &#34;start&#34;: &#34;1980-01-01T00:00:00+00:00&#34;
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            }
        ]
    }
}
</pre></div></div>
</div>
</section>
<section id="Call-process_mth5">
<h3>Call process_mth5<a class="headerlink" href="#Call-process_mth5" title="Permalink to this heading">Â¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_plot</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">tf_cls</span> <span class="o">=</span> <span class="n">process_mth5</span><span class="p">(</span><span class="n">config</span><span class="p">,</span>
                    <span class="n">kernel_dataset</span><span class="p">,</span>
                    <span class="n">units</span><span class="o">=</span><span class="s2">&quot;MT&quot;</span><span class="p">,</span>
                    <span class="n">show_plot</span><span class="o">=</span><span class="n">show_plot</span><span class="p">,</span>
                    <span class="n">z_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:15.115051+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary | Processing Summary Dataframe:</span>
<span class="ansi-bold">2025-08-03T00:33:15.121528+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary |
   duration  has_data  n_samples  run station          survey       run_hdf5_reference   station_hdf5_reference    fc  remote  stft mth5_obj dec_level  dec_factor  sample_rate  window_duration  num_samples_window  num_samples  num_stft_windows
0   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         0         1.0     1.000000            128.0                 128      39999.0             416.0
1   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         1         4.0     0.250000            512.0                 128       9999.0             103.0
2   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         2         4.0     0.062500           2048.0                 128       2499.0              25.0
3   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         3         4.0     0.015625           8192.0                 128        624.0               6.0
4   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;    True  None     None         0         1.0     1.000000            128.0                 128      39999.0             416.0
5   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;    True  None     None         1         4.0     0.250000            512.0                 128       9999.0             103.0
6   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;    True  None     None         2         4.0     0.062500           2048.0                 128       2499.0              25.0
7   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;    True  None     None         3         4.0     0.015625           8192.0                 128        624.0               6.0</span>
<span class="ansi-bold">2025-08-03T00:33:15.123316+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total memory: 15.62 GB</span>
<span class="ansi-bold">2025-08-03T00:33:15.124087+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total Bytes of Raw Data: 0.001 GB</span>
<span class="ansi-bold">2025-08-03T00:33:15.124701+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Raw Data will use: 0.004 % of memory</span>
<span class="ansi-bold">2025-08-03T00:33:15.135064+0000 | INFO | aurora.pipelines.transfer_function_kernel | mth5_has_fcs | Fourier coefficients not detected for survey: EMTF Synthetic, station: test1, run: 001-- Fourier coefficients will be computed</span>
<span class="ansi-bold">2025-08-03T00:33:15.135811+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
<span class="ansi-bold">2025-08-03T00:33:15.143861+0000 | INFO | aurora.pipelines.transfer_function_kernel | mth5_has_fcs | Fourier coefficients not detected for survey: EMTF Synthetic, station: test2, run: 001-- Fourier coefficients will be computed</span>
<span class="ansi-bold">2025-08-03T00:33:15.144486+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
<span class="ansi-bold">2025-08-03T00:33:15.146106+0000 | INFO | aurora.pipelines.transfer_function_kernel | check_if_fcs_already_exist | FC levels not present</span>
<span class="ansi-bold">2025-08-03T00:33:15.151019+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | Processing config indicates 4 decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:15.152372+0000 | INFO | aurora.pipelines.transfer_function_kernel | valid_decimations | After validation there are 4 valid decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:15.651243+0000 | INFO | mth5.processing.kernel_dataset | initialize_dataframe_for_processing | Dataset dataframe initialized successfully</span>
<span class="ansi-bold">2025-08-03T00:33:15.652010+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 0 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:15.825515+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Skip saving FCs. dec_level_config.save_fc =  False</span>
<span class="ansi-bold">2025-08-03T00:33:16.092317+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Skip saving FCs. dec_level_config.save_fc =  False</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:16.099046+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:16.107799+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.160476+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.219394+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.268083+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.313595+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.360048+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.409381+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.459647+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.522725+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.579057+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.633442+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.678836+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.724589+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.770748+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.817229+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.866913+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.929261+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:16.984197+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:17.037707+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:17.083857+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:17.130762+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:17.175226+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:17.220685+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:17.269258+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_synthetic_data_processing.nbconvert_19_1.png" src="../_images/tutorials_synthetic_data_processing.nbconvert_19_1.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:17.970254+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 1</span>
<span class="ansi-bold">2025-08-03T00:33:18.003270+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 1 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:18.154004+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Skip saving FCs. dec_level_config.save_fc =  False</span>
<span class="ansi-bold">2025-08-03T00:33:18.329934+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Skip saving FCs. dec_level_config.save_fc =  False</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:18.336349+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:18.348720+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.392490+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.438448+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.481445+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.524813+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.569236+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.623284+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.672731+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.717462+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.760988+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.803504+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.848818+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.896927+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.942991+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:18.986500+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:19.030076+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:19.073559+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:19.116174+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_synthetic_data_processing.nbconvert_19_3.png" src="../_images/tutorials_synthetic_data_processing.nbconvert_19_3.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:19.678965+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 2</span>
<span class="ansi-bold">2025-08-03T00:33:19.704878+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 2 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:19.827175+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Skip saving FCs. dec_level_config.save_fc =  False</span>
<span class="ansi-bold">2025-08-03T00:33:19.970519+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Skip saving FCs. dec_level_config.save_fc =  False</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:19.976379+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:19.983839+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.025065+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.066829+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.109898+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.152037+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.195063+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.239047+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.281258+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.323186+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.365799+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.408296+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.450302+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.493571+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.534960+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.576101+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.618100+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.660962+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:20.702564+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_synthetic_data_processing.nbconvert_19_5.png" src="../_images/tutorials_synthetic_data_processing.nbconvert_19_5.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:21.375840+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 3</span>
<span class="ansi-bold">2025-08-03T00:33:21.400541+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 3 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:21.520568+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Skip saving FCs. dec_level_config.save_fc =  False</span>
<span class="ansi-bold">2025-08-03T00:33:21.667055+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Skip saving FCs. dec_level_config.save_fc =  False</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:21.673059+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:21.679739+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:21.722161+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:21.766452+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:21.808603+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:21.851692+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:21.896353+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:21.941161+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:21.985452+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:22.030015+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:22.072700+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:22.116506+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:22.158673+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:22.201199+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:22.243687+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:22.286790+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_synthetic_data_processing.nbconvert_19_7.png" src="../_images/tutorials_synthetic_data_processing.nbconvert_19_7.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:22.916749+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | type(tf_cls): &lt;class &#39;mt_metadata.transfer_functions.core.TF&#39;&gt;</span>
<span class="ansi-bold">2025-08-03T00:33:22.917754+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
<span class="ansi-bold">2025-08-03T00:33:22.918600+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
</section>
<section id="Export-TF-to-a-file">
<h3>Export TF to a file<a class="headerlink" href="#Export-TF-to-a-file" title="Permalink to this heading">Â¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xml_file_base</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;synthetic_test1.xml&quot;</span>
<span class="n">tf_cls</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fn</span><span class="o">=</span><span class="n">xml_file_base</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s2">&quot;emtfxml&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
EMTFXML(station=&#39;0&#39;, latitude=0.00, longitude=0.00, elevation=0.00)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edi_file_base</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;synthetic_test1.edi&quot;</span>
<span class="n">tf_cls</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fn</span><span class="o">=</span><span class="n">edi_file_base</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s2">&quot;edi&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Station: 0
--------------------------------------------------
        Survey:        0
        Project:       None
        Acquired by:   None
        Acquired date: 1980-01-01
        Latitude:      0.000
        Longitude:     0.000
        Elevation:     0.000
        Impedance:     True
        Tipper:        True
        Number of periods: 25
                Period Range:   4.68249E+00 -- 1.51470E+03 s
                Frequency Range 6.60196E-04 -- 2.13561E-01 s
</pre></div></div>
</div>
<div class="alert alert-block alert-info"><p>NOTE Fourier coefficient section below here is a work in progress.</p>
</div></section>
</section>
<section id="Fourier-coefficient-storage-in-MTH5">
<h2>Fourier coefficient storage in MTH5<a class="headerlink" href="#Fourier-coefficient-storage-in-MTH5" title="Permalink to this heading">Â¶</a></h2>
<p>The capability to store Fourier coeffficients (FCs) in MTH5 is now available. This will enable some different approaches to processing and data quality control (QC). The data QC tools are a work in progress. The following examples show how to add some FC levels to an MTH5, providing a starting point for processing or feature extraction from these data.</p>
<p>There are currently two main ways to add FCs to the MTH5.</p>
<ol class="arabic simple">
<li><p>Store on the fly while processing with Aurora</p></li>
<li><p>Use a dedicated method to make FCs only.</p></li>
</ol>
<section id="Storing-while-processing-with-Aurora">
<h3>Storing while processing with Aurora<a class="headerlink" href="#Storing-while-processing-with-Aurora" title="Permalink to this heading">Â¶</a></h3>
<p>We can store FCs while processing by changing the processing configâs <code class="docutils literal notranslate"><span class="pre">save_fcs</span></code> attribute to True</p>
<p>If we do that with the current processing config however we encouter a warning:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Saving FCs for remote reference processing is not supported
 - To save FCs, process as single station, then you can use the FCs for RR processing
 - See issue #319 for details
 - forcing processing config save_fcs = False
</pre></div>
</div>
<p>There are two workarounds for this:</p>
<ol class="arabic simple">
<li><p>Process each station as a single station, and then the FCs (TODO: Add an example of this)</p></li>
<li><p>Explicitly call <code class="docutils literal notranslate"><span class="pre">add_fcs</span></code> function.</p></li>
</ol>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_size_before_adding_fcs</span> <span class="o">=</span> <span class="n">mth5_path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file_size_before_adding_fcs: </span><span class="si">{</span><span class="n">file_size_before_adding_fcs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
file_size_before_adding_fcs: 1010153
</pre></div></div>
</div>
</section>
<section id="Using-the-%22single-station-processing-method%22-of-FC-generation">
<h3>Using the âsingle-station processing methodâ of FC generation<a class="headerlink" href="#Using-the-%22single-station-processing-method%22-of-FC-generation" title="Permalink to this heading">Â¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set  kernel_dataset to work on one station only</span>
<span class="n">kernel_dataset</span> <span class="o">=</span> <span class="n">KernelDataset</span><span class="p">()</span>
<span class="n">kernel_dataset</span><span class="o">.</span><span class="n">from_run_summary</span><span class="p">(</span><span class="n">run_summary</span><span class="p">,</span> <span class="s2">&quot;test1&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="c1"># Update the processing config</span>

<span class="n">cc</span> <span class="o">=</span> <span class="n">ConfigCreator</span><span class="p">()</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">cc</span><span class="o">.</span><span class="n">create_from_kernel_dataset</span><span class="p">(</span><span class="n">kernel_dataset</span><span class="p">)</span>

<span class="c1"># tell the config to save the FCs</span>
<span class="k">for</span> <span class="n">dec</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">decimations</span><span class="p">:</span>
    <span class="n">dec</span><span class="o">.</span><span class="n">save_fcs</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">dec</span><span class="o">.</span><span class="n">save_fcs_type</span> <span class="o">=</span> <span class="s2">&quot;h5&quot;</span>

<span class="c1"># you can export the config to a json by uncommenting the following line</span>
<span class="c1"># cfg_json = config.to_json()</span>
<span class="n">kernel_dataset</span><span class="o">.</span><span class="n">mini_summary</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:23.103708+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column fc, adding and setting dtype to &lt;class &#39;pandas._libs.missing.NAType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:23.105543+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column remote, adding and setting dtype to &lt;class &#39;bool&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:23.106363+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column run_dataarray, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:23.107189+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column stft, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:23.108007+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column mth5_obj, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:23.114535+0000 | INFO | aurora.config.config_creator | determine_band_specification_style | Bands not defined; setting to EMTF BANDS_DEFAULT_FILE</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>survey</th>
      <th>station</th>
      <th>run</th>
      <th>start</th>
      <th>end</th>
      <th>duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>EMTF Synthetic</td>
      <td>test1</td>
      <td>001</td>
      <td>1980-01-01 00:00:00+00:00</td>
      <td>1980-01-01 11:06:39+00:00</td>
      <td>39999.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_plot</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">tf_cls</span> <span class="o">=</span> <span class="n">process_mth5</span><span class="p">(</span><span class="n">config</span><span class="p">,</span>
                    <span class="n">kernel_dataset</span><span class="p">,</span>
                    <span class="n">units</span><span class="o">=</span><span class="s2">&quot;MT&quot;</span><span class="p">,</span>
                    <span class="n">show_plot</span><span class="o">=</span><span class="n">show_plot</span><span class="p">,</span>
                    <span class="n">z_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:23.157035+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary | Processing Summary Dataframe:</span>
<span class="ansi-bold">2025-08-03T00:33:23.162982+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary |
   duration  has_data  n_samples  run station          survey       run_hdf5_reference   station_hdf5_reference    fc  remote  stft mth5_obj dec_level  dec_factor  sample_rate  window_duration  num_samples_window  num_samples  num_stft_windows
0   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         0         1.0     1.000000            128.0                 128      39999.0             416.0
1   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         1         4.0     0.250000            512.0                 128       9999.0             103.0
2   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         2         4.0     0.062500           2048.0                 128       2499.0              25.0
3   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         3         4.0     0.015625           8192.0                 128        624.0               6.0</span>
<span class="ansi-bold">2025-08-03T00:33:23.163755+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_processing | No RR station specified, switching RME_RR to RME</span>
<span class="ansi-bold">2025-08-03T00:33:23.164300+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_processing | No RR station specified, switching RME_RR to RME</span>
<span class="ansi-bold">2025-08-03T00:33:23.164846+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_processing | No RR station specified, switching RME_RR to RME</span>
<span class="ansi-bold">2025-08-03T00:33:23.165324+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_processing | No RR station specified, switching RME_RR to RME</span>
<span class="ansi-bold">2025-08-03T00:33:23.167316+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total memory: 15.62 GB</span>
<span class="ansi-bold">2025-08-03T00:33:23.168087+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total Bytes of Raw Data: 0.000 GB</span>
<span class="ansi-bold">2025-08-03T00:33:23.168847+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Raw Data will use: 0.002 % of memory</span>
<span class="ansi-bold">2025-08-03T00:33:23.177332+0000 | INFO | aurora.pipelines.transfer_function_kernel | mth5_has_fcs | Fourier coefficients not detected for survey: EMTF Synthetic, station: test1, run: 001-- Fourier coefficients will be computed</span>
<span class="ansi-bold">2025-08-03T00:33:23.178086+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
<span class="ansi-bold">2025-08-03T00:33:23.179648+0000 | INFO | aurora.pipelines.transfer_function_kernel | check_if_fcs_already_exist | FC levels not present</span>
<span class="ansi-bold">2025-08-03T00:33:23.183030+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | Processing config indicates 4 decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:23.184517+0000 | INFO | aurora.pipelines.transfer_function_kernel | valid_decimations | After validation there are 4 valid decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:23.449458+0000 | INFO | mth5.processing.kernel_dataset | initialize_dataframe_for_processing | Dataset dataframe initialized successfully</span>
<span class="ansi-bold">2025-08-03T00:33:23.450375+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 0 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:23.616785+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Saving FC level</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:23.729919+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:23.738316+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:23.771550+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:23.801585+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:23.831872+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:23.862706+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:23.896881+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:23.927407+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:23.963937+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.005554+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.042314+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.080840+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.116513+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.147063+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.177856+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.214384+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.247940+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.289442+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.326158+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.363747+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.399599+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.430171+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.460606+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.490920+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.523203+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:24.737883+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 1</span>
<span class="ansi-bold">2025-08-03T00:33:24.753704+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 1 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:24.905269+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Saving FC level</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:24.984836+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:24.992314+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.021243+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.049877+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.079791+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.109073+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.138011+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.168054+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.197023+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.225621+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.256641+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.288258+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.317115+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.346786+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.375238+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.403002+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.431175+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.459160+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.487774+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.633409+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 2</span>
<span class="ansi-bold">2025-08-03T00:33:25.651446+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 2 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:25.773679+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Saving FC level</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:25.845493+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:25.853210+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.886124+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.915156+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.944127+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:25.973261+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.002293+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.031340+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.059776+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.089013+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.118183+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.147329+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.176084+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.205396+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.233805+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.261807+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.290471+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.318700+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.347622+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.493273+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 3</span>
<span class="ansi-bold">2025-08-03T00:33:26.506343+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 3 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:26.628556+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Saving FC level</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:26.695591+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:26.702892+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.732530+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.761725+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.790863+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.819814+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.849616+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.878116+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.906848+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.935282+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.964959+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:26.994999+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:27.022868+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:27.050621+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:27.079472+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:27.107782+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:27.303772+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | type(tf_cls): &lt;class &#39;mt_metadata.transfer_functions.core.TF&#39;&gt;</span>
<span class="ansi-bold">2025-08-03T00:33:27.359456+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_size_after_adding_fcs_station_1</span> <span class="o">=</span> <span class="n">mth5_path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file_size_after_adding_fcs_station_1: </span><span class="si">{</span><span class="n">file_size_after_adding_fcs_station_1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
file_size_after_adding_fcs_station_1: 3709253
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now the other station</span>

<span class="c1"># set  kernel_dataset to work on one station only</span>
<span class="n">kernel_dataset</span> <span class="o">=</span> <span class="n">KernelDataset</span><span class="p">()</span>
<span class="n">kernel_dataset</span><span class="o">.</span><span class="n">from_run_summary</span><span class="p">(</span><span class="n">run_summary</span><span class="p">,</span> <span class="s2">&quot;test2&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="c1"># Update the processing config</span>

<span class="n">cc</span> <span class="o">=</span> <span class="n">ConfigCreator</span><span class="p">()</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">cc</span><span class="o">.</span><span class="n">create_from_kernel_dataset</span><span class="p">(</span><span class="n">kernel_dataset</span><span class="p">)</span>

<span class="c1"># tell the config to save the FCs</span>
<span class="k">for</span> <span class="n">dec</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">decimations</span><span class="p">:</span>
    <span class="n">dec</span><span class="o">.</span><span class="n">save_fcs</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">dec</span><span class="o">.</span><span class="n">save_fcs_type</span> <span class="o">=</span> <span class="s2">&quot;h5&quot;</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:27.377091+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column fc, adding and setting dtype to &lt;class &#39;pandas._libs.missing.NAType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:27.378929+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column remote, adding and setting dtype to &lt;class &#39;bool&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:27.379835+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column run_dataarray, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:27.380648+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column stft, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:27.381669+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column mth5_obj, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:27.387939+0000 | INFO | aurora.config.config_creator | determine_band_specification_style | Bands not defined; setting to EMTF BANDS_DEFAULT_FILE</span>
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_plot</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">tf_cls</span> <span class="o">=</span> <span class="n">process_mth5</span><span class="p">(</span><span class="n">config</span><span class="p">,</span>
                    <span class="n">kernel_dataset</span><span class="p">,</span>
                    <span class="n">units</span><span class="o">=</span><span class="s2">&quot;MT&quot;</span><span class="p">,</span>
                    <span class="n">show_plot</span><span class="o">=</span><span class="n">show_plot</span><span class="p">,</span>
                    <span class="n">z_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:27.425566+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary | Processing Summary Dataframe:</span>
<span class="ansi-bold">2025-08-03T00:33:27.431309+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary |
   duration  has_data  n_samples  run station          survey       run_hdf5_reference   station_hdf5_reference    fc  remote  stft mth5_obj dec_level  dec_factor  sample_rate  window_duration  num_samples_window  num_samples  num_stft_windows
0   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         0         1.0     1.000000            128.0                 128      39999.0             416.0
1   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         1         4.0     0.250000            512.0                 128       9999.0             103.0
2   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         2         4.0     0.062500           2048.0                 128       2499.0              25.0
3   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  &lt;NA&gt;   False  None     None         3         4.0     0.015625           8192.0                 128        624.0               6.0</span>
<span class="ansi-bold">2025-08-03T00:33:27.432240+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_processing | No RR station specified, switching RME_RR to RME</span>
<span class="ansi-bold">2025-08-03T00:33:27.432938+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_processing | No RR station specified, switching RME_RR to RME</span>
<span class="ansi-bold">2025-08-03T00:33:27.433449+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_processing | No RR station specified, switching RME_RR to RME</span>
<span class="ansi-bold">2025-08-03T00:33:27.433836+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_processing | No RR station specified, switching RME_RR to RME</span>
<span class="ansi-bold">2025-08-03T00:33:27.435874+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total memory: 15.62 GB</span>
<span class="ansi-bold">2025-08-03T00:33:27.436588+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total Bytes of Raw Data: 0.000 GB</span>
<span class="ansi-bold">2025-08-03T00:33:27.436983+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Raw Data will use: 0.002 % of memory</span>
<span class="ansi-bold">2025-08-03T00:33:27.446572+0000 | INFO | aurora.pipelines.transfer_function_kernel | mth5_has_fcs | Fourier coefficients not detected for survey: EMTF Synthetic, station: test2, run: 001-- Fourier coefficients will be computed</span>
<span class="ansi-bold">2025-08-03T00:33:27.447468+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
<span class="ansi-bold">2025-08-03T00:33:27.449029+0000 | INFO | aurora.pipelines.transfer_function_kernel | check_if_fcs_already_exist | FC levels not present</span>
<span class="ansi-bold">2025-08-03T00:33:27.451911+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | Processing config indicates 4 decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:27.453650+0000 | INFO | aurora.pipelines.transfer_function_kernel | valid_decimations | After validation there are 4 valid decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:27.698539+0000 | INFO | mth5.processing.kernel_dataset | initialize_dataframe_for_processing | Dataset dataframe initialized successfully</span>
<span class="ansi-bold">2025-08-03T00:33:27.699497+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 0 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:27.868657+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Saving FC level</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:27.979025+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:27.987873+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.017688+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.047741+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.079439+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.109865+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.140336+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.172117+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.206560+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.248071+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.285003+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.323722+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.361045+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.391767+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.422462+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.453765+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.487045+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.528631+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.565461+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.602718+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.638407+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.670426+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.701619+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.732581+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.770173+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:28.986778+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 1</span>
<span class="ansi-bold">2025-08-03T00:33:29.002620+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 1 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:29.155671+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Saving FC level</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:29.235327+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:29.242836+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.272615+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.303803+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.333261+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.362357+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.391155+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.421302+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.451306+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.483343+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.514774+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.543646+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.573460+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.603656+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.637847+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.667153+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.698261+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.728025+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.756856+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:29.903251+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 2</span>
<span class="ansi-bold">2025-08-03T00:33:29.916222+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 2 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:30.036925+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Saving FC level</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:30.108926+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:30.116415+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.145450+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.174477+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.204296+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.234166+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.263337+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.292696+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.321606+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.350292+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.378990+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.407937+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.436617+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.466397+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.495219+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.523833+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.552241+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.580999+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.609515+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.753887+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 3</span>
<span class="ansi-bold">2025-08-03T00:33:30.766655+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 3 Successfully</span>
<span class="ansi-bold">2025-08-03T00:33:30.888640+0000 | INFO | aurora.time_series.spectrogram_helpers | save_fourier_coefficients | Saving FC level</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:30.956566+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:30.963359+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:30.992390+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.020852+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.049359+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.077963+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.107976+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.136640+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.165274+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.194902+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.223981+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.255626+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.285989+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.314859+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.344797+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.373125+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:31.566651+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | type(tf_cls): &lt;class &#39;mt_metadata.transfer_functions.core.TF&#39;&gt;</span>
<span class="ansi-bold">2025-08-03T00:33:31.622326+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<p>Now, the FCs are there (for the specific processing configuration).</p>
<p>If you were to re-process the data, the FCs are already there,</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_size_after_adding_fcs_station_2</span> <span class="o">=</span> <span class="n">mth5_path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file_size_after_adding_fcs_station_2: </span><span class="si">{</span><span class="n">file_size_after_adding_fcs_station_2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
file_size_after_adding_fcs_station_2: 6413343
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set  kernel_dataset to work on both stations again</span>
<span class="n">kernel_dataset</span> <span class="o">=</span> <span class="n">KernelDataset</span><span class="p">()</span>
<span class="n">kernel_dataset</span><span class="o">.</span><span class="n">from_run_summary</span><span class="p">(</span><span class="n">run_summary</span><span class="p">,</span> <span class="s2">&quot;test1&quot;</span><span class="p">,</span> <span class="s2">&quot;test2&quot;</span><span class="p">)</span>

<span class="c1"># Update the processing config</span>

<span class="n">cc</span> <span class="o">=</span> <span class="n">ConfigCreator</span><span class="p">()</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">cc</span><span class="o">.</span><span class="n">create_from_kernel_dataset</span><span class="p">(</span><span class="n">kernel_dataset</span><span class="p">)</span>
<br/><br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:31.639788+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column fc, adding and setting dtype to &lt;class &#39;pandas._libs.missing.NAType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:31.641376+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column remote, adding and setting dtype to &lt;class &#39;bool&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:31.642493+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column run_dataarray, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:31.643324+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column stft, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:31.644518+0000 | INFO | mth5.processing.kernel_dataset | _add_columns | KernelDataset DataFrame needs column mth5_obj, adding and setting dtype to &lt;class &#39;NoneType&#39;&gt;.</span>
<span class="ansi-bold">2025-08-03T00:33:31.656054+0000 | INFO | aurora.config.config_creator | determine_band_specification_style | Bands not defined; setting to EMTF BANDS_DEFAULT_FILE</span>
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">aurora.pipelines.transfer_function_kernel</span><span class="w"> </span><span class="kn">import</span> <span class="n">TransferFunctionKernel</span>
<span class="n">tfk</span> <span class="o">=</span> <span class="n">TransferFunctionKernel</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="n">kernel_dataset</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="n">tfk</span><span class="o">.</span><span class="n">update_processing_summary</span><span class="p">()</span>
<span class="n">tfk</span><span class="o">.</span><span class="n">check_if_fcs_already_exist</span><span class="p">()</span>
<span class="n">tfk</span><span class="o">.</span><span class="n">dataset_df</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:31.707495+0000 | INFO | aurora.pipelines.transfer_function_kernel | mth5_has_fcs | FCs detected -- checking against processing requirements.</span>
<span class="ansi-bold">2025-08-03T00:33:31.766225+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
<span class="ansi-bold">2025-08-03T00:33:31.775043+0000 | INFO | aurora.pipelines.transfer_function_kernel | mth5_has_fcs | FCs detected -- checking against processing requirements.</span>
<span class="ansi-bold">2025-08-03T00:33:31.827496+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
<span class="ansi-bold">2025-08-03T00:33:31.828847+0000 | INFO | aurora.pipelines.transfer_function_kernel | check_if_fcs_already_exist | All fc_levels already existSkip time series processing is OK</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>channel_scale_factors</th>
      <th>duration</th>
      <th>end</th>
      <th>has_data</th>
      <th>input_channels</th>
      <th>mth5_path</th>
      <th>n_samples</th>
      <th>output_channels</th>
      <th>run</th>
      <th>sample_rate</th>
      <th>start</th>
      <th>station</th>
      <th>survey</th>
      <th>run_hdf5_reference</th>
      <th>station_hdf5_reference</th>
      <th>fc</th>
      <th>remote</th>
      <th>run_dataarray</th>
      <th>stft</th>
      <th>mth5_obj</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>{'ex': 1.0, 'ey': 1.0, 'hx': 1.0, 'hy': 1.0, '...</td>
      <td>39999.0</td>
      <td>1980-01-01 11:06:39+00:00</td>
      <td>True</td>
      <td>[hx, hy]</td>
      <td>/usr/share/miniconda/envs/aurora-test/lib/pyth...</td>
      <td>40000</td>
      <td>[ex, ey, hz]</td>
      <td>001</td>
      <td>1.0</td>
      <td>1980-01-01 00:00:00+00:00</td>
      <td>test1</td>
      <td>EMTF Synthetic</td>
      <td>&lt;HDF5 object reference&gt;</td>
      <td>&lt;HDF5 object reference&gt;</td>
      <td>True</td>
      <td>False</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>1</th>
      <td>{'ex': 1.0, 'ey': 1.0, 'hx': 1.0, 'hy': 1.0, '...</td>
      <td>39999.0</td>
      <td>1980-01-01 11:06:39+00:00</td>
      <td>True</td>
      <td>[hx, hy]</td>
      <td>/usr/share/miniconda/envs/aurora-test/lib/pyth...</td>
      <td>40000</td>
      <td>[ex, ey, hz]</td>
      <td>001</td>
      <td>1.0</td>
      <td>1980-01-01 00:00:00+00:00</td>
      <td>test2</td>
      <td>EMTF Synthetic</td>
      <td>&lt;HDF5 object reference&gt;</td>
      <td>&lt;HDF5 object reference&gt;</td>
      <td>True</td>
      <td>True</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_plot</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">tf_cls</span> <span class="o">=</span> <span class="n">process_mth5</span><span class="p">(</span><span class="n">config</span><span class="p">,</span>
                    <span class="n">kernel_dataset</span><span class="p">,</span>
                    <span class="n">units</span><span class="o">=</span><span class="s2">&quot;MT&quot;</span><span class="p">,</span>
                    <span class="n">show_plot</span><span class="o">=</span><span class="n">show_plot</span><span class="p">,</span>
                    <span class="n">z_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:31.867985+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary | Processing Summary Dataframe:</span>
<span class="ansi-bold">2025-08-03T00:33:31.874571+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary |
   duration  has_data  n_samples  run station          survey       run_hdf5_reference   station_hdf5_reference    fc  remote  stft mth5_obj dec_level  dec_factor  sample_rate  window_duration  num_samples_window  num_samples  num_stft_windows
0   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True   False  None     None         0         1.0     1.000000            128.0                 128      39999.0             416.0
1   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True   False  None     None         1         4.0     0.250000            512.0                 128       9999.0             103.0
2   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True   False  None     None         2         4.0     0.062500           2048.0                 128       2499.0              25.0
3   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True   False  None     None         3         4.0     0.015625           8192.0                 128        624.0               6.0
4   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True    True  None     None         0         1.0     1.000000            128.0                 128      39999.0             416.0
5   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True    True  None     None         1         4.0     0.250000            512.0                 128       9999.0             103.0
6   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True    True  None     None         2         4.0     0.062500           2048.0                 128       2499.0              25.0
7   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True    True  None     None         3         4.0     0.015625           8192.0                 128        624.0               6.0</span>
<span class="ansi-bold">2025-08-03T00:33:31.876202+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total memory: 15.62 GB</span>
<span class="ansi-bold">2025-08-03T00:33:31.880192+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total Bytes of Raw Data: 0.001 GB</span>
<span class="ansi-bold">2025-08-03T00:33:31.880781+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Raw Data will use: 0.004 % of memory</span>
<span class="ansi-bold">2025-08-03T00:33:31.881669+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_save_fc_settings | FC Layer already exists -- forcing processing config save_fcs=False</span>
<span class="ansi-bold">2025-08-03T00:33:31.886932+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | Processing config indicates 4 decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:31.888530+0000 | INFO | aurora.pipelines.transfer_function_kernel | valid_decimations | After validation there are 4 valid decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:31.904284+0000 | INFO | mth5.processing.kernel_dataset | initialize_dataframe_for_processing | row channel_scale_factors     {&#39;ex&#39;: 1.0, &#39;ey&#39;: 1.0, &#39;hx&#39;: 1.0, &#39;hy&#39;: 1.0, &#39;...
duration                                                            39999.0
end                                               1980-01-01 11:06:39+00:00
has_data                                                               True
input_channels                                                     [hx, hy]
mth5_path                 /usr/share/miniconda/envs/aurora-test/lib/pyth...
n_samples                                                             40000
output_channels                                                [ex, ey, hz]
run                                                                     001
sample_rate                                                             1.0
start                                             1980-01-01 00:00:00+00:00
station                                                               test1
survey                                                       EMTF Synthetic
run_hdf5_reference                                  &lt;HDF5 object reference&gt;
station_hdf5_reference                              &lt;HDF5 object reference&gt;
fc                                                                     True
remote                                                                False
run_dataarray                                                          None
stft                                                                   None
mth5_obj                  /:\n====================\n    |- Group: Survey...
Name: 0, dtype: object already has fcs prescribed by processing config-- skipping time series initialisation</span>
<span class="ansi-bold">2025-08-03T00:33:32.156327+0000 | INFO | mth5.processing.kernel_dataset | initialize_dataframe_for_processing | row channel_scale_factors     {&#39;ex&#39;: 1.0, &#39;ey&#39;: 1.0, &#39;hx&#39;: 1.0, &#39;hy&#39;: 1.0, &#39;...
duration                                                            39999.0
end                                               1980-01-01 11:06:39+00:00
has_data                                                               True
input_channels                                                     [hx, hy]
mth5_path                 /usr/share/miniconda/envs/aurora-test/lib/pyth...
n_samples                                                             40000
output_channels                                                [ex, ey, hz]
run                                                                     001
sample_rate                                                             1.0
start                                             1980-01-01 00:00:00+00:00
station                                                               test2
survey                                                       EMTF Synthetic
run_hdf5_reference                                  &lt;HDF5 object reference&gt;
station_hdf5_reference                              &lt;HDF5 object reference&gt;
fc                                                                     True
remote                                                                 True
run_dataarray                                                          None
stft                                                                   None
mth5_obj                  /:\n====================\n    |- Group: Survey...
Name: 1, dtype: object already has fcs prescribed by processing config-- skipping time series initialisation</span>
<span class="ansi-bold">2025-08-03T00:33:32.404495+0000 | INFO | mth5.processing.kernel_dataset | initialize_dataframe_for_processing | Dataset dataframe initialized successfully</span>
<span class="ansi-bold">2025-08-03T00:33:32.405357+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 0 Successfully</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:32.527110+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:32.535619+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:32.585122+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:32.633458+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:32.678583+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:32.724473+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:32.771422+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:32.818649+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:32.868039+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:32.930371+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:32.986369+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.042343+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.088210+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.135230+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.183073+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.229812+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.279882+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.343157+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.398190+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.452015+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.496485+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.544997+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.590011+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.636322+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.685155+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:33.923520+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 1</span>
<span class="ansi-bold">2025-08-03T00:33:33.926337+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test1, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:33.928377+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test2, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:33.928927+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 1 Successfully</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:34.029850+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:34.037335+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.080577+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.124653+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.169175+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.212571+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.256423+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.301396+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.347164+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.389873+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.432831+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.476123+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.519864+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.564267+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.606638+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.648933+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.691305+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.737196+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.783079+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:34.958882+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 2</span>
<span class="ansi-bold">2025-08-03T00:33:34.961841+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test1, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:34.963721+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test2, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:34.964391+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 2 Successfully</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:35.055709+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:35.063671+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.105997+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.153454+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.195751+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.378766+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.428290+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.472370+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.515031+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.558041+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.600781+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.643156+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.686531+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.729944+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.772362+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.814365+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.857185+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.899933+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:35.943244+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.108254+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 3</span>
<span class="ansi-bold">2025-08-03T00:33:36.110854+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test1, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:36.112992+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test2, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:36.113606+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 3 Successfully</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:36.207326+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:36.214428+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.256263+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.300628+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.346372+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.388584+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.432150+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.475084+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.517161+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.558970+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.601090+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.645864+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.689722+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.731911+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.773952+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:36.815825+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:37.021860+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | type(tf_cls): &lt;class &#39;mt_metadata.transfer_functions.core.TF&#39;&gt;</span>
<span class="ansi-bold">2025-08-03T00:33:37.023126+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
<span class="ansi-bold">2025-08-03T00:33:37.023911+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
</section>
<section id="Using-Dedicated-FC-Generation-(add_fcs-function)">
<h3>Using Dedicated FC Generation (<code class="docutils literal notranslate"><span class="pre">add_fcs</span></code> function)<a class="headerlink" href="#Using-Dedicated-FC-Generation-(add_fcs-function)" title="Permalink to this heading">Â¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mth5.timeseries.spectre.helpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_fcs_to_mth5</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mth5.timeseries.spectre.helpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">fc_decimations_creator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mth5.timeseries.spectre.helpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">read_back_fcs</span>
</pre></div>
</div>
</div>
<p>Build a fresh copy of the synthetic data file</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mth5_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
<span class="n">create_test12rr_h5</span><span class="p">(</span><span class="n">target_folder</span><span class="o">=</span><span class="n">target_folder</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.048019+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterStation, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.051177+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Reports, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.052680+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Filters, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.329705+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Standards, skipping from_dict.</span>
<span class="ansi-bold">2025-08-03T00:33:37.335842+0000 | INFO | mth5.mth5 | _initialize_file | Initialized MTH5 0.1.0 file /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5 in mode w</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.344743+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Station, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.350457+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for TransferFunctions, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.351519+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterFC, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.352582+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterFeatures, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.424073+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Run, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.904272+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Station, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.909794+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for TransferFunctions, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.910870+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterFC, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.911668+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterFeatures, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:37.982177+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Run, skipping from_dict.</span>
<span class="ansi-bold">2025-08-03T00:33:38.508783+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PosixPath(&#39;/usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5&#39;)
</pre></div></div>
</div>
<p>In this case we need to prescribe the decimation configuration.</p>
<p>If we dont want to decimate, we can just pass <code class="docutils literal notranslate"><span class="pre">fc_decimations</span> <span class="pre">==</span> <span class="pre">&quot;degenerate&quot;</span></code> to add_fcs</p>
<p>Here is how the decimations can be created</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample_rate</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">fc_decimations</span> <span class="o">=</span> <span class="n">fc_decimations_creator</span><span class="p">(</span><span class="n">initial_sample_rate</span><span class="o">=</span><span class="n">sample_rate</span><span class="p">,</span> <span class="n">time_period</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>And here is what they look like, â¦ a list, with each element specifying the needed info for decimation and FFT.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fc_decimations</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[{
     &#34;decimation&#34;: {
         &#34;channels_estimated&#34;: [],
         &#34;hdf5_reference&#34;: null,
         &#34;id&#34;: &#34;0&#34;,
         &#34;mth5_type&#34;: null,
         &#34;short_time_fourier_transform.harmonic_indices&#34;: [
             -1
         ],
         &#34;short_time_fourier_transform.method&#34;: &#34;fft&#34;,
         &#34;short_time_fourier_transform.min_num_stft_windows&#34;: 2,
         &#34;short_time_fourier_transform.per_window_detrend_type&#34;: &#34;&#34;,
         &#34;short_time_fourier_transform.pre_fft_detrend_type&#34;: &#34;linear&#34;,
         &#34;short_time_fourier_transform.prewhitening_type&#34;: &#34;first difference&#34;,
         &#34;short_time_fourier_transform.recoloring&#34;: true,
         &#34;short_time_fourier_transform.window.clock_zero_type&#34;: &#34;ignore&#34;,
         &#34;short_time_fourier_transform.window.normalized&#34;: true,
         &#34;short_time_fourier_transform.window.num_samples&#34;: 128,
         &#34;short_time_fourier_transform.window.overlap&#34;: 32,
         &#34;short_time_fourier_transform.window.type&#34;: &#34;boxcar&#34;,
         &#34;time_period.end&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_period.start&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_series_decimation.anti_alias_filter&#34;: &#34;default&#34;,
         &#34;time_series_decimation.factor&#34;: 1.0,
         &#34;time_series_decimation.level&#34;: 0,
         &#34;time_series_decimation.method&#34;: &#34;default&#34;,
         &#34;time_series_decimation.sample_rate&#34;: 1.0
     }
 },
 {
     &#34;decimation&#34;: {
         &#34;channels_estimated&#34;: [],
         &#34;hdf5_reference&#34;: null,
         &#34;id&#34;: &#34;1&#34;,
         &#34;mth5_type&#34;: null,
         &#34;short_time_fourier_transform.harmonic_indices&#34;: [
             -1
         ],
         &#34;short_time_fourier_transform.method&#34;: &#34;fft&#34;,
         &#34;short_time_fourier_transform.min_num_stft_windows&#34;: 2,
         &#34;short_time_fourier_transform.per_window_detrend_type&#34;: &#34;&#34;,
         &#34;short_time_fourier_transform.pre_fft_detrend_type&#34;: &#34;linear&#34;,
         &#34;short_time_fourier_transform.prewhitening_type&#34;: &#34;first difference&#34;,
         &#34;short_time_fourier_transform.recoloring&#34;: true,
         &#34;short_time_fourier_transform.window.clock_zero_type&#34;: &#34;ignore&#34;,
         &#34;short_time_fourier_transform.window.normalized&#34;: true,
         &#34;short_time_fourier_transform.window.num_samples&#34;: 128,
         &#34;short_time_fourier_transform.window.overlap&#34;: 32,
         &#34;short_time_fourier_transform.window.type&#34;: &#34;boxcar&#34;,
         &#34;time_period.end&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_period.start&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_series_decimation.anti_alias_filter&#34;: &#34;default&#34;,
         &#34;time_series_decimation.factor&#34;: 4.0,
         &#34;time_series_decimation.level&#34;: 1,
         &#34;time_series_decimation.method&#34;: &#34;default&#34;,
         &#34;time_series_decimation.sample_rate&#34;: 0.25
     }
 },
 {
     &#34;decimation&#34;: {
         &#34;channels_estimated&#34;: [],
         &#34;hdf5_reference&#34;: null,
         &#34;id&#34;: &#34;2&#34;,
         &#34;mth5_type&#34;: null,
         &#34;short_time_fourier_transform.harmonic_indices&#34;: [
             -1
         ],
         &#34;short_time_fourier_transform.method&#34;: &#34;fft&#34;,
         &#34;short_time_fourier_transform.min_num_stft_windows&#34;: 2,
         &#34;short_time_fourier_transform.per_window_detrend_type&#34;: &#34;&#34;,
         &#34;short_time_fourier_transform.pre_fft_detrend_type&#34;: &#34;linear&#34;,
         &#34;short_time_fourier_transform.prewhitening_type&#34;: &#34;first difference&#34;,
         &#34;short_time_fourier_transform.recoloring&#34;: true,
         &#34;short_time_fourier_transform.window.clock_zero_type&#34;: &#34;ignore&#34;,
         &#34;short_time_fourier_transform.window.normalized&#34;: true,
         &#34;short_time_fourier_transform.window.num_samples&#34;: 128,
         &#34;short_time_fourier_transform.window.overlap&#34;: 32,
         &#34;short_time_fourier_transform.window.type&#34;: &#34;boxcar&#34;,
         &#34;time_period.end&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_period.start&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_series_decimation.anti_alias_filter&#34;: &#34;default&#34;,
         &#34;time_series_decimation.factor&#34;: 4.0,
         &#34;time_series_decimation.level&#34;: 2,
         &#34;time_series_decimation.method&#34;: &#34;default&#34;,
         &#34;time_series_decimation.sample_rate&#34;: 0.0625
     }
 },
 {
     &#34;decimation&#34;: {
         &#34;channels_estimated&#34;: [],
         &#34;hdf5_reference&#34;: null,
         &#34;id&#34;: &#34;3&#34;,
         &#34;mth5_type&#34;: null,
         &#34;short_time_fourier_transform.harmonic_indices&#34;: [
             -1
         ],
         &#34;short_time_fourier_transform.method&#34;: &#34;fft&#34;,
         &#34;short_time_fourier_transform.min_num_stft_windows&#34;: 2,
         &#34;short_time_fourier_transform.per_window_detrend_type&#34;: &#34;&#34;,
         &#34;short_time_fourier_transform.pre_fft_detrend_type&#34;: &#34;linear&#34;,
         &#34;short_time_fourier_transform.prewhitening_type&#34;: &#34;first difference&#34;,
         &#34;short_time_fourier_transform.recoloring&#34;: true,
         &#34;short_time_fourier_transform.window.clock_zero_type&#34;: &#34;ignore&#34;,
         &#34;short_time_fourier_transform.window.normalized&#34;: true,
         &#34;short_time_fourier_transform.window.num_samples&#34;: 128,
         &#34;short_time_fourier_transform.window.overlap&#34;: 32,
         &#34;short_time_fourier_transform.window.type&#34;: &#34;boxcar&#34;,
         &#34;time_period.end&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_period.start&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_series_decimation.anti_alias_filter&#34;: &#34;default&#34;,
         &#34;time_series_decimation.factor&#34;: 4.0,
         &#34;time_series_decimation.level&#34;: 3,
         &#34;time_series_decimation.method&#34;: &#34;default&#34;,
         &#34;time_series_decimation.sample_rate&#34;: 0.015625
     }
 },
 {
     &#34;decimation&#34;: {
         &#34;channels_estimated&#34;: [],
         &#34;hdf5_reference&#34;: null,
         &#34;id&#34;: &#34;4&#34;,
         &#34;mth5_type&#34;: null,
         &#34;short_time_fourier_transform.harmonic_indices&#34;: [
             -1
         ],
         &#34;short_time_fourier_transform.method&#34;: &#34;fft&#34;,
         &#34;short_time_fourier_transform.min_num_stft_windows&#34;: 2,
         &#34;short_time_fourier_transform.per_window_detrend_type&#34;: &#34;&#34;,
         &#34;short_time_fourier_transform.pre_fft_detrend_type&#34;: &#34;linear&#34;,
         &#34;short_time_fourier_transform.prewhitening_type&#34;: &#34;first difference&#34;,
         &#34;short_time_fourier_transform.recoloring&#34;: true,
         &#34;short_time_fourier_transform.window.clock_zero_type&#34;: &#34;ignore&#34;,
         &#34;short_time_fourier_transform.window.normalized&#34;: true,
         &#34;short_time_fourier_transform.window.num_samples&#34;: 128,
         &#34;short_time_fourier_transform.window.overlap&#34;: 32,
         &#34;short_time_fourier_transform.window.type&#34;: &#34;boxcar&#34;,
         &#34;time_period.end&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_period.start&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_series_decimation.anti_alias_filter&#34;: &#34;default&#34;,
         &#34;time_series_decimation.factor&#34;: 4.0,
         &#34;time_series_decimation.level&#34;: 4,
         &#34;time_series_decimation.method&#34;: &#34;default&#34;,
         &#34;time_series_decimation.sample_rate&#34;: 0.00390625
     }
 },
 {
     &#34;decimation&#34;: {
         &#34;channels_estimated&#34;: [],
         &#34;hdf5_reference&#34;: null,
         &#34;id&#34;: &#34;5&#34;,
         &#34;mth5_type&#34;: null,
         &#34;short_time_fourier_transform.harmonic_indices&#34;: [
             -1
         ],
         &#34;short_time_fourier_transform.method&#34;: &#34;fft&#34;,
         &#34;short_time_fourier_transform.min_num_stft_windows&#34;: 2,
         &#34;short_time_fourier_transform.per_window_detrend_type&#34;: &#34;&#34;,
         &#34;short_time_fourier_transform.pre_fft_detrend_type&#34;: &#34;linear&#34;,
         &#34;short_time_fourier_transform.prewhitening_type&#34;: &#34;first difference&#34;,
         &#34;short_time_fourier_transform.recoloring&#34;: true,
         &#34;short_time_fourier_transform.window.clock_zero_type&#34;: &#34;ignore&#34;,
         &#34;short_time_fourier_transform.window.normalized&#34;: true,
         &#34;short_time_fourier_transform.window.num_samples&#34;: 128,
         &#34;short_time_fourier_transform.window.overlap&#34;: 32,
         &#34;short_time_fourier_transform.window.type&#34;: &#34;boxcar&#34;,
         &#34;time_period.end&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_period.start&#34;: &#34;1980-01-01T00:00:00+00:00&#34;,
         &#34;time_series_decimation.anti_alias_filter&#34;: &#34;default&#34;,
         &#34;time_series_decimation.factor&#34;: 4.0,
         &#34;time_series_decimation.level&#34;: 5,
         &#34;time_series_decimation.method&#34;: &#34;default&#34;,
         &#34;time_series_decimation.sample_rate&#34;: 0.0009765625
     }
 }]
</pre></div></div>
</div>
<p>Now add the decimation levels:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">add_fcs_to_mth5</span><span class="p">(</span><span class="n">mth5_path</span><span class="p">,</span> <span class="n">fc_decimations</span><span class="o">=</span><span class="n">fc_decimations</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:38.544783+0000 | INFO | mth5.timeseries.spectre.helpers | add_fcs_to_mth5 |


survey: EMTF Synthetic, station: test1, sample_rate 1.0</span>
<span class="ansi-bold">2025-08-03T00:33:38.551394+0000 | INFO | mth5.timeseries.spectre.helpers | add_fcs_to_mth5 | survey: EMTF Synthetic, station: test1, sample_rate 1.0, i_run_row 0</span>
<span class="ansi-bold">2025-08-03T00:33:40.002382+0000 | INFO | mth5.timeseries.spectre.helpers | add_fcs_to_mth5 |


survey: EMTF Synthetic, station: test2, sample_rate 1.0</span>
<span class="ansi-bold">2025-08-03T00:33:40.008129+0000 | INFO | mth5.timeseries.spectre.helpers | add_fcs_to_mth5 | survey: EMTF Synthetic, station: test2, sample_rate 1.0, i_run_row 0</span>
<span class="ansi-bold">2025-08-03T00:33:41.537058+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<p>Now take a look at the mth5</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mth5</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">mth5</span><span class="o">.</span><span class="n">mth5</span><span class="o">.</span><span class="n">MTH5</span><span class="p">(</span><span class="n">mth5_path</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">open_mth5</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/:
====================
    |- Group: Survey
    ----------------
        |- Group: Filters
        -----------------
            |- Group: coefficient
            ---------------------
                |- Group: 0.1
                -------------
                |- Group: 1
                -----------
                |- Group: 10
                ------------
            |- Group: fap
            -------------
            |- Group: fir
            -------------
            |- Group: time_delay
            --------------------
            |- Group: zpk
            -------------
        |- Group: Reports
        -----------------
        |- Group: Standards
        -------------------
            --&gt; Dataset: summary
            ......................
        |- Group: Stations
        ------------------
            |- Group: test1
            ---------------
                |- Group: 001
                -------------
                    --&gt; Dataset: ex
                    .................
                    --&gt; Dataset: ey
                    .................
                    --&gt; Dataset: hx
                    .................
                    --&gt; Dataset: hy
                    .................
                    --&gt; Dataset: hz
                    .................
                |- Group: Features
                ------------------
                |- Group: Fourier_Coefficients
                ------------------------------
                    |- Group: 001
                    -------------
                        |- Group: 0
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 1
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 2
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 3
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 4
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 5
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                |- Group: Transfer_Functions
                ----------------------------
            |- Group: test2
            ---------------
                |- Group: 001
                -------------
                    --&gt; Dataset: ex
                    .................
                    --&gt; Dataset: ey
                    .................
                    --&gt; Dataset: hx
                    .................
                    --&gt; Dataset: hy
                    .................
                    --&gt; Dataset: hz
                    .................
                |- Group: Features
                ------------------
                |- Group: Fourier_Coefficients
                ------------------------------
                    |- Group: 001
                    -------------
                        |- Group: 0
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 1
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 2
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 3
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 4
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                        |- Group: 5
                        -----------
                            --&gt; Dataset: ex
                            .................
                            --&gt; Dataset: ey
                            .................
                            --&gt; Dataset: hx
                            .................
                            --&gt; Dataset: hy
                            .................
                            --&gt; Dataset: hz
                            .................
                |- Group: Transfer_Functions
                ----------------------------
        --&gt; Dataset: channel_summary
        ..............................
        --&gt; Dataset: fc_summary
        .........................
        --&gt; Dataset: tf_summary
        .........................
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">close_mth5</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:41.625828+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<p>Alternatively, we could have translated the Aurora processing config to an mt_metadata FC decimation and gnerated FCs with the same function.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mth5_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
<span class="n">create_test12rr_h5</span><span class="p">(</span><span class="n">target_folder</span><span class="o">=</span><span class="n">target_folder</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:41.643822+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterStation, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:41.644897+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Reports, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:41.646445+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Filters, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:41.922618+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Standards, skipping from_dict.</span>
<span class="ansi-bold">2025-08-03T00:33:41.928846+0000 | INFO | mth5.mth5 | _initialize_file | Initialized MTH5 0.1.0 file /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5 in mode w</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:41.937721+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Station, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:41.943727+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for TransferFunctions, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:41.944932+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterFC, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:41.945978+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterFeatures, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:42.016953+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Run, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:42.493711+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Station, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:42.501654+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for TransferFunctions, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:42.502978+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterFC, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:42.503901+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for MasterFeatures, skipping from_dict.</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:42.576433+0000 | WARNING | mth5.groups.base | read_metadata | No metadata found for Run, skipping from_dict.</span>
<span class="ansi-bold">2025-08-03T00:33:43.112999+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PosixPath(&#39;/usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5&#39;)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract FC decimations from processing config and build the layer</span>

<span class="n">fc_decimations</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">x</span><span class="o">.</span><span class="n">to_fc_decimation</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">decimations</span>
<span class="p">]</span>

<span class="n">add_fcs_to_mth5</span><span class="p">(</span><span class="n">mth5_path</span><span class="p">,</span> <span class="n">fc_decimations</span><span class="o">=</span><span class="n">fc_decimations</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:43.136087+0000 | INFO | mth5.timeseries.spectre.helpers | add_fcs_to_mth5 |


survey: EMTF Synthetic, station: test1, sample_rate 1.0</span>
<span class="ansi-bold">2025-08-03T00:33:43.140894+0000 | INFO | mth5.timeseries.spectre.helpers | add_fcs_to_mth5 | survey: EMTF Synthetic, station: test1, sample_rate 1.0, i_run_row 0</span>
<span class="ansi-bold">2025-08-03T00:33:44.225342+0000 | INFO | mth5.timeseries.spectre.helpers | add_fcs_to_mth5 |


survey: EMTF Synthetic, station: test2, sample_rate 1.0</span>
<span class="ansi-bold">2025-08-03T00:33:44.230623+0000 | INFO | mth5.timeseries.spectre.helpers | add_fcs_to_mth5 | survey: EMTF Synthetic, station: test2, sample_rate 1.0, i_run_row 0</span>
<span class="ansi-bold">2025-08-03T00:33:45.360327+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">read_back_fcs</span><span class="p">(</span><span class="n">mth5_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:45.376407+0000 | INFO | mth5.timeseries.spectre.helpers | read_back_fcs | survey: EMTF Synthetic, station: test1, sample_rate 1.0</span>
<span class="ansi-bold">2025-08-03T00:33:45.379853+0000 | INFO | mth5.timeseries.spectre.helpers | read_back_fcs | FC Groups: [&#39;001&#39;]</span>
<span class="ansi-bold">2025-08-03T00:33:45.444240+0000 | INFO | mth5.timeseries.spectre.helpers | read_back_fcs | survey: EMTF Synthetic, station: test2, sample_rate 1.0</span>
<span class="ansi-bold">2025-08-03T00:33:45.447924+0000 | INFO | mth5.timeseries.spectre.helpers | read_back_fcs | FC Groups: [&#39;001&#39;]</span>
<span class="ansi-bold">2025-08-03T00:33:45.567565+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<p>And we can see that when processing, aurora detects that the FC layer is already there, and skips creating it.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_plot</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">tf_cls</span> <span class="o">=</span> <span class="n">process_mth5</span><span class="p">(</span><span class="n">config</span><span class="p">,</span>
                    <span class="n">kernel_dataset</span><span class="p">,</span>
                    <span class="n">units</span><span class="o">=</span><span class="s2">&quot;MT&quot;</span><span class="p">,</span>
                    <span class="n">show_plot</span><span class="o">=</span><span class="n">show_plot</span><span class="p">,</span>
                    <span class="n">z_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-bold">2025-08-03T00:33:45.597177+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary | Processing Summary Dataframe:</span>
<span class="ansi-bold">2025-08-03T00:33:45.603313+0000 | INFO | aurora.pipelines.transfer_function_kernel | show_processing_summary |
   duration  has_data  n_samples  run station          survey       run_hdf5_reference   station_hdf5_reference    fc  remote  stft                                     mth5_obj dec_level  dec_factor  sample_rate  window_duration  num_samples_window  num_samples  num_stft_windows
0   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True   False  None  HDF5 file is closed and cannot be accessed.         0         1.0     1.000000            128.0                 128      39999.0             416.0
1   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True   False  None  HDF5 file is closed and cannot be accessed.         1         4.0     0.250000            512.0                 128       9999.0             103.0
2   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True   False  None  HDF5 file is closed and cannot be accessed.         2         4.0     0.062500           2048.0                 128       2499.0              25.0
3   39999.0      True      40000  001   test1  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True   False  None  HDF5 file is closed and cannot be accessed.         3         4.0     0.015625           8192.0                 128        624.0               6.0
4   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True    True  None  HDF5 file is closed and cannot be accessed.         0         1.0     1.000000            128.0                 128      39999.0             416.0
5   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True    True  None  HDF5 file is closed and cannot be accessed.         1         4.0     0.250000            512.0                 128       9999.0             103.0
6   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True    True  None  HDF5 file is closed and cannot be accessed.         2         4.0     0.062500           2048.0                 128       2499.0              25.0
7   39999.0      True      40000  001   test2  EMTF Synthetic  &lt;HDF5 object reference&gt;  &lt;HDF5 object reference&gt;  True    True  None  HDF5 file is closed and cannot be accessed.         3         4.0     0.015625           8192.0                 128        624.0               6.0</span>
<span class="ansi-bold">2025-08-03T00:33:45.605307+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total memory: 15.62 GB</span>
<span class="ansi-bold">2025-08-03T00:33:45.606063+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Total Bytes of Raw Data: 0.001 GB</span>
<span class="ansi-bold">2025-08-03T00:33:45.606521+0000 | INFO | aurora.pipelines.transfer_function_kernel | memory_check | Raw Data will use: 0.004 % of memory</span>
<span class="ansi-bold">2025-08-03T00:33:45.607413+0000 | INFO | aurora.pipelines.transfer_function_kernel | validate_save_fc_settings | FC Layer already exists -- forcing processing config save_fcs=False</span>
<span class="ansi-bold">2025-08-03T00:33:45.612470+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | Processing config indicates 4 decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:45.614086+0000 | INFO | aurora.pipelines.transfer_function_kernel | valid_decimations | After validation there are 4 valid decimation levels</span>
<span class="ansi-bold">2025-08-03T00:33:45.856967+0000 | INFO | mth5.processing.kernel_dataset | initialize_dataframe_for_processing | row channel_scale_factors     {&#39;ex&#39;: 1.0, &#39;ey&#39;: 1.0, &#39;hx&#39;: 1.0, &#39;hy&#39;: 1.0, &#39;...
duration                                                            39999.0
end                                               1980-01-01 11:06:39+00:00
has_data                                                               True
input_channels                                                     [hx, hy]
mth5_path                 /usr/share/miniconda/envs/aurora-test/lib/pyth...
n_samples                                                             40000
output_channels                                                [ex, ey, hz]
run                                                                     001
sample_rate                                                             1.0
start                                             1980-01-01 00:00:00+00:00
station                                                               test1
survey                                                       EMTF Synthetic
run_hdf5_reference                                  &lt;HDF5 object reference&gt;
station_hdf5_reference                              &lt;HDF5 object reference&gt;
fc                                                                     True
remote                                                                False
run_dataarray             [[&lt;xarray.DataArray ()&gt;\narray(345)\nCoordinat...
stft                                                                   None
mth5_obj                  /:\n====================\n    |- Group: Survey...
Name: 0, dtype: object already has fcs prescribed by processing config-- skipping time series initialisation</span>
<span class="ansi-bold">2025-08-03T00:33:46.351848+0000 | INFO | mth5.processing.kernel_dataset | initialize_dataframe_for_processing | row channel_scale_factors     {&#39;ex&#39;: 1.0, &#39;ey&#39;: 1.0, &#39;hx&#39;: 1.0, &#39;hy&#39;: 1.0, &#39;...
duration                                                            39999.0
end                                               1980-01-01 11:06:39+00:00
has_data                                                               True
input_channels                                                     [hx, hy]
mth5_path                 /usr/share/miniconda/envs/aurora-test/lib/pyth...
n_samples                                                             40000
output_channels                                                [ex, ey, hz]
run                                                                     001
sample_rate                                                             1.0
start                                             1980-01-01 00:00:00+00:00
station                                                               test2
survey                                                       EMTF Synthetic
run_hdf5_reference                                  &lt;HDF5 object reference&gt;
station_hdf5_reference                              &lt;HDF5 object reference&gt;
fc                                                                     True
remote                                                                 True
run_dataarray             [[&lt;xarray.DataArray ()&gt;\narray(520)\nCoordinat...
stft                                                                   None
mth5_obj                  /:\n====================\n    |- Group: Survey...
Name: 1, dtype: object already has fcs prescribed by processing config-- skipping time series initialisation</span>
<span class="ansi-bold">2025-08-03T00:33:46.609859+0000 | INFO | mth5.processing.kernel_dataset | initialize_dataframe_for_processing | Dataset dataframe initialized successfully</span>
<span class="ansi-bold">2025-08-03T00:33:46.610999+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 0 Successfully</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:46.734117+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:46.742334+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:46.789009+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:46.836292+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:46.884369+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:46.929460+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:46.975363+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.021205+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.069819+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.133502+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.188847+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.244512+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.291488+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.336577+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.381580+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.427378+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.475748+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.537361+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 25.728968s  (0.038867Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.591023+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 19.929573s  (0.050177Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.644455+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 15.164131s  (0.065945Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.688032+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 11.746086s  (0.085135Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.735916+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 9.195791s  (0.108745Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.781287+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 7.362526s  (0.135823Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.827029+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 5.856115s  (0.170762Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:47.874758+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 4.682492s  (0.213562Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.110197+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 1</span>
<span class="ansi-bold">2025-08-03T00:33:48.112694+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test1, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:48.114659+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test2, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:48.115272+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 1 Successfully</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:48.232825+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:48.240754+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.283820+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.327931+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.372339+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.416381+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.460950+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.506407+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.549059+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.592073+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.635598+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.679894+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.727072+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.778043+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 102.915872s  (0.009717Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.821256+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 85.631182s  (0.011678Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.864556+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 68.881694s  (0.014518Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.909008+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 54.195827s  (0.018452Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.953180+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 43.003958s  (0.023254Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:48.997856+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 33.310722s  (0.030020Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.159808+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 2</span>
<span class="ansi-bold">2025-08-03T00:33:49.162362+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test1, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:49.164626+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test2, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:49.165156+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 2 Successfully</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:49.284778+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:49.293610+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.345970+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.395400+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.441009+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.485949+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.533343+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.581469+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.625828+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.670991+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.722190+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.767364+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.814919+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.864413+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 411.663489s  (0.002429Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.908625+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 342.524727s  (0.002919Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.954202+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 275.526776s  (0.003629Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:49.999039+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 216.783308s  (0.004613Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.042866+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 172.015831s  (0.005813Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.087289+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 133.242890s  (0.007505Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.248618+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | DECIMATION LEVEL 3</span>
<span class="ansi-bold">2025-08-03T00:33:50.251552+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test1, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:50.253737+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | FC already exists for survey: EMTF Synthetic, station: test2, run: 001 -- skipping decimation</span>
<span class="ansi-bold">2025-08-03T00:33:50.254217+0000 | INFO | aurora.pipelines.transfer_function_kernel | update_dataset_df | Dataset Dataframe Updated for decimation level 3 Successfully</span>
<span class="ansi-yellow-intense-fg ansi-bold">2025-08-03T00:33:50.370397+0000 | WARNING | aurora.pipelines.feature_weights | extract_features | Features could not be accessed from MTH5 --
Calculating features on the fly (development only)</span>
<span class="ansi-bold">2025-08-03T00:33:50.377368+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.421347+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.466620+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.511791+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.557488+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.605685+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.661123+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.716039+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.760725+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.806905+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.858820+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1514.701336s  (0.000660Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.916869+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 1042.488956s  (0.000959Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:50.970667+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 723.371271s  (0.001382Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:51.015159+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 532.971560s  (0.001876Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:51.059367+0000 | INFO | aurora.time_series.frequency_band_helpers | get_band_for_tf_estimate | Accessing band 412.837995s  (0.002422Hz)</span>
<span class="ansi-bold">2025-08-03T00:33:51.296874+0000 | INFO | aurora.pipelines.process_mth5 | process_mth5_legacy | type(tf_cls): &lt;class &#39;mt_metadata.transfer_functions.core.TF&#39;&gt;</span>
<span class="ansi-bold">2025-08-03T00:33:51.298091+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
<span class="ansi-bold">2025-08-03T00:33:51.298992+0000 | INFO | mth5.mth5 | close_mth5 | Flushing and closing /usr/share/miniconda/envs/aurora-test/lib/python3.8/site-packages/mth5/data/mth5/test12rr.h5</span>
</pre></div></div>
</div>
<div class="alert alert-block alert-info"><p>NOTE Feature storage section below is a work in progress.</p>
</div></section>
</section>
</section>
<section id="Feature-Storage-Experimental-work-in-progress">
<h1>Feature Storage <strong>Experimental work in progress</strong><a class="headerlink" href="#Feature-Storage-Experimental-work-in-progress" title="Permalink to this heading">Â¶</a></h1>
<p>Any spectrogram (FC array at some decimation level) can be passed to a feature extraction method. These features can, in turn be stored in the mth5.</p>
<p>This will have the following steps:</p>
<ol class="arabic simple" start="0">
<li><p>select the source FC decimation level (Will use â0â to start, but also test with â1â,)</p></li>
<li><p>Select the frequency bands (probably make these wider than normal so we have plenty of FCs per time window)</p></li>
</ol>
<ul class="simple">
<li><p>Note these are <code class="docutils literal notranslate"><span class="pre">feature_extraction_bands</span></code>, which are possibly different from TF estimation bands.</p></li>
</ul>
<p>To do this we will want to look at the frequencies associated with each FCGroup, and each decimation level.</p>
<ul class="simple">
<li><p>Group Runs on Sample Rate</p>
<ul>
<li><p>tabulate decimation levels</p></li>
<li><p>group decimation levels by id (and validate that the decimation_level.metadata.sample_rate_decimations agree)</p></li>
<li><p>for each decimation level, we should get the frequencies associated â this can be deduced from the shape of the dataset, and the min/max frequecies of the metadata, but for now we can just unpack the xarray and take the frequncey axis)</p></li>
</ul>
</li>
</ul>
<ol class="arabic simple" start="2">
<li><p>loop over the bands (for each band:)</p></li>
</ol>
<ul class="simple">
<li><p>2a. extract the band from the FClayer in the mth5 (shape will be nch x ntime x nharmonics)</p></li>
</ul>
<ol class="arabic simple" start="3">
<li><p>loop over time window (for each time):</p></li>
</ol>
<ul class="simple">
<li><p>3a) extract feature</p></li>
</ul>
<p>As a placeholder, we will compute the channel crosspowers, and or channel energy.</p>
<ul class="simple">
<li><p>3b) place the feature into an xarray</p></li>
</ul>
<ol class="arabic simple" start="4">
<li><p>save teh xarray as âfeature_cross_powerâ</p></li>
</ol>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Imports</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">mth5.mth5</span><span class="w"> </span><span class="kn">import</span> <span class="n">MTH5</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># # Selection of frequency bands</span>

<span class="c1"># active_decimation_level = &quot;0&quot;</span>

<span class="c1"># m = MTH5(mth5_path)</span>
<span class="c1"># m.open_mth5()</span>
<span class="c1"># run_summary_df = m.run_summary  # This fails on current main but works on add_aurora_tools branch.</span>
<span class="c1"># run_summary_df</span>
</pre></div>
</div>
</div>
<p>It would be nice if we could get a summary of the fcs available in the mth5. here is a prototype for how that could be done.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># # Prototype for fc_summary</span>

<span class="c1"># fc_summary = None</span>

<span class="c1"># for i, row in run_summary_df.iterrows():</span>
<span class="c1">#     print(row.station, row.run)</span>
<span class="c1">#     station_obj = m.get_station(row.station)</span>
<span class="c1">#     run_fc_group = station_obj.fourier_coefficients_group.get_fc_group(row.run)</span>
<span class="c1">#     if fc_summary is None:</span>
<span class="c1">#         fc_summary = run_fc_group.decimation_level_summary</span>
<span class="c1">#         fc_summary[&quot;station&quot;] = row.station</span>
<span class="c1">#         fc_summary[&quot;run&quot;] = row.run</span>
<span class="c1">#         fc_summary[&quot;sample_rate_time_series&quot;] = 0.0</span>
<span class="c1">#         fc_summary[&quot;window_num_samples&quot;] = 0</span>
<span class="c1">#         fc_summary[&quot;harmonic_indices&quot;] = None</span>
<span class="c1">#     else:</span>
<span class="c1">#         tmp = run_fc_group.decimation_level_summary</span>
<span class="c1">#         tmp[&quot;station&quot;] = row.station</span>
<span class="c1">#         tmp[&quot;run&quot;] = row.run</span>
<span class="c1">#         tmp[&quot;sample_rate_time_series&quot;] = 0.0</span>
<span class="c1">#         tmp[&quot;window_num_samples&quot;] = 0</span>
<span class="c1">#         tmp[&quot;harmonic_indices&quot;] = None</span>
<span class="c1">#         fc_summary = pd.concat([fc_summary, tmp], ignore_index=True)</span>

<span class="c1">#         #print(run_fc_group)</span>
<span class="c1">#     for dec_level_id in run_fc_group.groups_list:</span>
<span class="c1">#         dec_level = run_fc_group.get_decimation_level(dec_level_id)</span>
<span class="c1">#         cond1 = fc_summary.station==row.station</span>
<span class="c1">#         cond2 = fc_summary.run==row.run</span>
<span class="c1">#         cond3 = fc_summary.component==dec_level_id</span>
<span class="c1">#         fc_summary.loc[cond1 &amp; cond2 &amp; cond3]  # this should be a unique row</span>
<span class="c1">#         ndx = fc_summary.loc[cond1 &amp; cond2 &amp; cond3].index</span>
<span class="c1">#         assert(len(ndx))==1</span>
<span class="c1">#         #fc_summary[&quot;sample_rate_time_series&quot;].at[ndx] = dec_level.metadata.i</span>
<span class="c1">#         fc_summary[&quot;window_num_samples&quot;].at[ndx[0]] = dec_level.metadata.window.num_samples</span>
<span class="c1">#         fc_summary[&quot;sample_rate_time_series&quot;].at[ndx[0]] = dec_level.metadata.sample_rate</span>
<span class="c1">#         fc_summary[&quot;harmonic_indices&quot;].at[ndx[0]] = dec_level.metadata.harmonic_indices</span>


<span class="c1">#         #print(dec_level_id, dec_level)</span>
<span class="c1">#         xr_dec_level = dec_level.to_xarray()</span>
<span class="c1">#         print(&quot;station&quot;, row.station, &quot;run&quot;, row.run, &quot;decimation level&quot;, dec_level_id, &quot;SAMPLE rate&quot;, dec_level.metadata.sample_rate) # xr_dec_level.frequency)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># fc_summary[&quot;delta_f&quot;] = fc_summary[&quot;sample_rate_time_series&quot;] / fc_summary[&quot;window_num_samples&quot;]</span>
<span class="c1"># fc_summary</span>
</pre></div>
</div>
</div>
<p>The above table tells us what we need to know to get frequency axes .. and actually, we can make <code class="docutils literal notranslate"><span class="pre">_frequencies()</span></code> a method of <code class="docutils literal notranslate"><span class="pre">FC_dec_level</span></code>.</p>
<p>Note that when harmonic_indices is [-1,], that means all the (1-sided) FCs are kept.</p>
<ul class="simple">
<li><p>this can be sanity checked by asserting that the dataset size is <code class="docutils literal notranslate"><span class="pre">window_num_samples</span></code>//2</p></li>
</ul>
<p>So now pick a decimation level, â¦ In this case, the <code class="docutils literal notranslate"><span class="pre">component</span></code> column is telling us the decimation level.</p>
<ul class="simple">
<li><p>It would seem sensible to make sure that the sample rates, (and delta_f) values are same as well.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># cond0 = fc_summary[&quot;component&quot;] == active_decimation_level</span>
<span class="c1"># fc_runs_to_featureize_df = fc_summary[cond0]</span>
<span class="c1"># fc_runs_to_featureize_df</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># frqs = np.fft.fftfreq?</span>
</pre></div>
</div>
</div>
<p>Now pick a scheme for defining the feature frequency bands</p>
<ul class="simple">
<li><p>we prefer not to use the lowest few harmonics â¦ this is like setting the minimum number of cycles per window, say 10</p></li>
<li><p>we also prefer not to take harmonics very close to the Nyquist frequency as these maybe attenuated by AAF, say we go up to 80% Nyq</p></li>
<li><p>For TF estimation, bands may be only a few FCs wide,but for feature extraction we make them much wider.</p></li>
<li><p>lets try with around half an octave</p></li>
<li><p>how about 2 bands per octave, mean</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># min_cycles = 10</span>
<span class="c1"># nyquist_fraction = 0.8</span>
<span class="c1"># n_feature_bands_per_octave = 2</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># for i, row in fc_runs_to_featureize_df.iterrows():</span>
<span class="c1">#     frequencies = np.fft.rfftfreq(row.window_num_samples, row.sample_rate_time_series)</span>
<span class="c1">#     lower_index = int(min_cycles)</span>
<span class="c1">#     upper_index = int(nyquist_fraction*(row.window_num_samples//2))</span>
<span class="c1">#     print(f&quot; lower_index={lower_index}, upper_index={upper_index}&quot;)</span>
<span class="c1">#     freq_min = frequencies[lower_index]</span>
<span class="c1">#     freq_max = frequencies[upper_index]</span>
<span class="c1">#     print(f&quot;Available band: {freq_min:3f} to {freq_max:3f}&quot;)</span>
<span class="c1">#     frequency_ratio = freq_max/freq_min</span>
<span class="c1">#     available_decades = np.log10(frequency_ratio)</span>
<span class="c1">#     available_ocataves = np.log2(frequency_ratio)</span>
<span class="c1">#     print(f&quot;Available decades: {available_decades:3f}&quot;)</span>
<span class="c1">#     print(f&quot;Available octaves: {available_ocataves:3f}&quot;)</span>
<span class="c1">#     num_feature_bands = available_ocataves * n_feature_bands_per_octave</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># dec_level.metadata</span>
<span class="c1"># dec_level.to_xarray()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># cond1 = fc_summary.station==&quot;test1&quot;</span>
<span class="c1"># cond2 = fc_summary.run==&quot;001&quot;</span>
<span class="c1"># cond3 = fc_summary.component==&quot;0&quot;</span>
<span class="c1"># fc_summary.loc[cond1 &amp; cond2 &amp; cond3].index</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># fc_summary[&quot;sample_rate_time_series&quot;].at[0]</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># m.close_mth5()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Karl Kappler, Jared Peacock, Andy Frassetto, Tim Ronan, Lindsey Heagy, Douglas Oldenburg.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>